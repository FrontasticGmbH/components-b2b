(()=>{var e={};e.id=2064,e.ids=[2064],e.modules={32325:e=>{"use strict";e.exports=require("jsdom")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},29021:e=>{"use strict";e.exports=require("fs")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},62173:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>l});var s=r(70260),o=r(28203),a=r(25155),i=r.n(a),n=r(67292),c={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);r.d(t,c);let l=["",{children:["[locale]",{children:["preview",{children:["[previewId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,59327)),"/Users/khizar/dev/frontastic/saas/project-libraries/b2b/packages/poc/frontend/src/app/[locale]/preview/[previewId]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,51341)),"/Users/khizar/dev/frontastic/saas/project-libraries/b2b/packages/poc/frontend/src/app/[locale]/layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"]}],d=["/Users/khizar/dev/frontastic/saas/project-libraries/b2b/packages/poc/frontend/src/app/[locale]/preview/[previewId]/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/[locale]/preview/[previewId]/page",pathname:"/[locale]/preview/[previewId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},55379:(e,t,r)=>{Promise.resolve().then(r.bind(r,16679)),Promise.resolve().then(r.bind(r,27133)),Promise.resolve().then(r.bind(r,5185))},92331:(e,t,r)=>{Promise.resolve().then(r.bind(r,59085)),Promise.resolve().then(r.bind(r,18506)),Promise.resolve().then(r.bind(r,89905))},18506:(e,t,r)=>{"use strict";r.d(t,{default:()=>en});var s=r(45512),o=r(58009),a=r(85762);let i=({children:e,wrapperClassName:t,gridClassName:r})=>(0,s.jsx)("div",{className:t,children:(0,s.jsx)("div",{className:(0,a.p)("grid","grid-cols-12",r),children:e})}),n=e=>e?"border-accent-red border border-dashed border-2":"",c=e=>`${e.mobile?"block":"hidden"} ${e.tablet?"md:block":"md:hidden"} ${e.desktop?"lg:block":"lg:hidden"}`,l=({configuration:e,isHighlighted:t,children:r,className:o})=>{let i={gridColumn:`span ${e.size} / span ${e.size}`},l=(0,a.p)(o,n(t),c(e));return(0,s.jsx)("div",{style:i,className:l,children:r})};var d=r(93767),u=r(32368),m=r(2799),p=r(83867),f=r(10434),h=r(44223),x=r(17),g=r(75729),v=r(26465),b=r(16276),w=r(56055),j=r(688),y=r(28165);let k=({title:e,summary:t,link:r})=>(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center pt-[60px] md:pt-[100px] lg:pt-[200px]",children:[e&&(0,s.jsx)("h1",{className:"pb-3 text-18 font-extrabold leading-normal text-gray-700 md:pb-5 md:text-20 lg:pb-6 lg:text-24",children:e}),t&&(0,s.jsx)("p",{className:"text-14 leading-loose text-gray-600 md:text-16",children:t}),r&&(0,s.jsx)("div",{className:"py-4 md:py-6 lg:py-7",children:(0,s.jsx)(y.default,{href:r.href??"/",underlineOnHover:!1,children:(0,s.jsx)(j.default,{variant:"primary",className:"min-w-[160px] py-2 text-14 lg:py-3 lg:text-16",children:r.name})})})]})});var P=r(29845),I=r(36593);let q=async({data:e,searchParams:t,flatCategories:r=[],treeCategories:o=[]})=>{if(!e.data?.dataSource)return(0,s.jsx)(s.Fragment,{});let a=e.data.dataSource?.category?.split("/")?.at(-1)??"",i=r.find(e=>e.slug===a),n=o.find(e=>e.slug===a),c=i?.depth===0,l=!!t.query,d=(e.categoryConfiguration??[]).reduce((e,t)=>({...e,[t.key]:t}),{}),u=e.useIntermediaryCategoryPage&&c&&!t.view&&(n?.descendants?.length??0)>=3;return(0,s.jsx)(I.default,{...e.data.dataSource,categoryConfiguration:d,categories:r,category:o.find(e=>e.slug===a)??i,displayIntermediaryPage:u&&!l})};var S=r(79334),C=r(19217),N=r(7036);let E=async({data:e,params:t,searchParams:r,projectSettings:o})=>{let{locale:a}=t,{token:i}=r,n=await C.x.composableCommerce.account.confirm({token:i}),c=n.isError&&n.error.message===`Error: URI not found: /${o?.projectKey}/customers/email/confirm`;if(n.isError)return(0,s.jsx)(N.default,{...e,isAlreadyVerified:c});(0,S.redirect)(`/${a}/login/`)};var _=r(19810),$=r(71545),z=r(87460),A=r(96708),H=r(90710),R=r(25266),F=r(22672),M=r(4929),U=r(74431),T=r(58813),G=r(25053),O=r(3347),D=r(66223),J=r(77486),K=r(18148),W=r(98561),B=r(11286),V=r(5816),X=r(13016);let L=({bgColor:e="white",space:t})=>(0,s.jsx)("div",{className:{white:"bg-white","neutral-200":"bg-neutral-200"}[e],style:{paddingTop:t}});var Q=r(72970),Y=r(98581);let Z=(0,r(13289).default)(()=>Promise.all([r.e(9584),r.e(5872)]).then(r.bind(r,15872)),{loadableGenerated:{modules:["lib/tastics/approval-flow-details/index.tsx -> ./components/approval-flows-client-wrapper"]}}),ee={"commercetools/ui/content/hero-tile":w.default,"commercetools/ui/content/content-items":({data:e})=>(0,s.jsx)(f.default,{...e,items:e.items.map(e=>({...e,link:(0,h.s)(e.link)})),link:(0,h.s)(e.linkReference,e.link)}),"commercetools/ui/content/content-tiles":({data:{asSlider:e,...t}})=>{let r={...t,link:(0,h.s)(t.linkReference,t.link),items:t.items.map(e=>({...e,link:(0,h.s)(e.linkReference,e.link)}))};return e?(0,s.jsx)(x.default,{...r}):(0,s.jsx)(g.default,{...r})},"commercetools/ui/footer":({data:e})=>(0,s.jsx)(b.default,{...e,links:e.links.map(e=>(0,h.s)(e.href,e.name))}),"commercetools/ui/dashboard":v.default,"commercetools/ui/not-found":({data:{link:e,linkName:t,...r}})=>(0,s.jsx)(k,{...r,link:(0,h.s)(e,t)}),"commercetools/ui/content/blog":d.default,"commercetools/ui/header":P.default,"commercetools/ui/products/details":e=>e.data.data?.dataSource?.product?(0,s.jsx)(K.default,{...e}):(0,S.redirect)("/404"),"commercetools/ui/products/product-list":q,"commercetools/ui/cart":$.default,"commercetools/ui/account/login":u.default,"commercetools/ui/account/verify":E,"commercetools/ui/account/verify-associate":_.default,"commercetools/ui/account/register":m.default,"commercetools/ui/account/reset-password":p.default,"commercetools/ui/quotes":z.default,"commercetools/ui/orders":A.default,"commercetools/ui/company-admin":H.default,"commercetools/ui/purchase-lists":R.default,"commercetools/ui/settings":F.default,"commercetools/ui/addresses":M.default,"commercetools/ui/purchase-list-detail":U.default,"commercetools/ui/order-detail":T.default,"commercetools/ui/quote-detail":G.default,"commercetools/ui/quote-request-detail":W.default,"commercetools/ui/checkout":O.default,"commercetools/ui/quote-checkout":B.default,"commercetools/ui/thank-you":D.default,"commercetools/ui/quote-thank-you":V.default,"commercetools/ui/products/product-slider":J.default,"commercetools/ui/products/related-products-slider":Y.default,"commercetools/ui/spacer":({data:e})=>(0,s.jsx)(L,{...e}),"commercetools/ui/approval-rules":X.default,"commercetools/ui/approval-flows":Q.default,"commercetools/ui/approval-flow-details":e=>(0,s.jsx)(Z,{...e})},et=(e,t)=>Object.entries(e).reduce((e,[r,s])=>"dataSourceId"===r?{...e,[r]:s,dataSource:t[s]}:Array.isArray(s)?{...e,[r]:s}:"object"==typeof s&&null!==s?{...e,[r]:et(s,t)}:{...e,[r]:s},{}),er=new Uint32Array(65536),es=({data:e})=>(0,s.jsx)(s.Fragment,{}),eo=({data:e,params:t,searchParams:r,dataSources:o,isHighlighted:a,projectSettings:i,flatCategories:l,treeCategories:d})=>{let u=ee[e.tasticType],m=o?et(e.configuration,o):e.configuration;return(0,s.jsx)("div",{id:e.tasticId,className:`${n(a)} ${c(e.configuration)}`,children:u?(0,s.jsx)(u,{data:m,params:t,searchParams:r,projectSettings:i,flatCategories:l,treeCategories:d}):(0,s.jsx)(es,{data:e})})},ea=({data:e,params:t,searchParams:r,currentHighlight:o,gridClassName:c="",wrapperClassName:d="",projectSettings:u,flatCategories:m,treeCategories:p})=>{let{page:f,data:h}=e,x=[f.sections.head,f.sections.main,f.sections.footer],g={head:"",main:"grow body-section",footer:""};return(0,s.jsx)("div",{className:"flex min-h-screen flex-col items-stretch justify-start",children:x.filter(Boolean).map(e=>(0,s.jsx)(i,{gridClassName:c,wrapperClassName:(0,a.p)("relative w-full",d,n(o===e.sectionId),g[e.sectionId]),children:e?.layoutElements?.map(e=>s.jsx(l,{configuration:e.configuration,isHighlighted:o===e.layoutElementId,children:e.tastics.map(e=>s.jsx(eo,{data:e,params:t,searchParams:r,dataSources:h.dataSources,isHighlighted:o===e.tasticId,projectSettings:u,flatCategories:m,treeCategories:p},e.tasticId))},e.layoutElementId))},e.sectionId))})};class ei{constructor(e,t={}){if(this.context={customer:"demo",idDebug:!1,endpoint:"preview",...e},this.messageHandlers=t,!this.context.previewId)throw Error("context.previewId is required");this.webSocket=null,this.connected=!1,this.connectionFails=0,this.connect()}connect(){this.webSocket=new WebSocket((this.context.isDebug?"ws://":"wss://")+`${this.context.customer}.frontastic.io`+(this.context.isDebug?".local":"")+`:8080/ws?${this.context.endpoint}=${this.context.previewId}`),this.webSocket.onmessage=this.handleMessage.bind(this),this.webSocket.onopen=()=>{this.connectionFails=0,this.connected=!0},this.webSocket.onclose=()=>{this.webSocket=null,this.connected=!1,setTimeout(this.connect.bind(this),1e3*Math.min(++this.connectionFails,30))}}handleMessage(e){let t=JSON.parse(e.data);if("Ping"!==t.Name){if(this.messageHandlers[t.Name])return this.messageHandlers[t.Name](t.Payload,t);console.info("Unknown WebSocket message",t)}}sendMessage(e,t=!1){if(e.Channel=this.context.previewId,e.Payload=e.Payload||[],this.connected)return this.webSocket.send(JSON.stringify(e));t&&setTimeout(()=>{this.sendMessage(e,!0)},100)}}let en=({data:e,params:t,searchParams:r})=>{let[a,i]=(0,o.useState)(),n=(0,o.useRef)(null),c=e.previewContext?.customerName??"demo",l=()=>{window.location=window.location},d=()=>i(void 0);return((0,o.useEffect)(()=>{e?.previewId&&!n.current&&(n.current=new ei({previewId:e.previewId,customer:c},{Refresh:l,Highlight:({item:e})=>{a!==e&&i(e)},EndHighlight:d}),n.current.connect())},[a,e?.previewId,c]),e)?(0,s.jsx)(ea,{data:e,params:t,searchParams:r,currentHighlight:a}):(0,s.jsx)(s.Fragment,{})}},59327:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,fetchCache:()=>l});var s=r(62740),o=r(59652),a=r(5185),i=r(27133),n=r(81677),c=r(16679);let l="force-no-store";async function d(e){let t=await e.searchParams,r=await e.params,{locale:l,previewId:d}=r;o.x.defaultConfigure(l);let u=await o.x.page.getPreview({previewId:d});if(u.isError)return(0,s.jsx)(s.Fragment,{});let m=await (0,n.$)([l],["common","account","cart","checkout","customer-support","error","newsletter","orders","payment","product","success","thank-you","wishlist","dashboard","quick-order"]);return(0,s.jsxs)("div",{"data-theme":(!u.isError&&u.data.pageFolder.configuration.displayTheme)??"default",children:[(0,s.jsxs)(a.Providers,{translations:m,locale:l,initialData:{},page:u,children:[(0,s.jsx)(i.default,{data:u.data,params:r,searchParams:t}),(0,s.jsx)(c.default,{})]}),(0,s.jsx)("div",{id:"react-modal-custom-portal"})]})}},27133:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/khizar/dev/frontastic/saas/project-libraries/b2b/packages/poc/frontend/src/lib/preview-renderer/index.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/khizar/dev/frontastic/saas/project-libraries/b2b/packages/poc/frontend/src/lib/preview-renderer/index.tsx","default")}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[5994,9909,8403,1203,9652,1222],()=>r(62173));module.exports=s})();