"use strict";exports.id=6941,exports.ids=[6941],exports.modules={56941:(e,t,s)=>{s.r(t),s.d(t,{default:()=>I});var n=s(45512),i=s(58009),o=s(62999),a=s(98326),r=s(44223),d=s(65138),u=s(69427),c=s(72190),p=s(77269),m=s(24118),l=s(27034),h=s(80034),A=s(65593),y=s(1916),g=s(84357),k=s(33211),b=s(42117);let w=()=>{let{translate:e}=(0,h.A)(),{selectedBusinessUnit:t,selectedStore:s}=(0,A.rW)(),{requestQuote:n}=(0,u.A)(t?.key,s?.key);return[{id:"purchase.order",name:`${e("checkout.purchase.order")} (PO)`,description:e("checkout.purchase.order.desc"),image:{src:"",className:""},makePayment:async e=>(await n(e)).quoteRequestId}]},I=({data:e})=>{let t=(0,o.A)(),{projectSettings:s}=(0,k.A)(),{account:I}=(0,y.A)(),{translate:q}=(0,h.A)(),{addAddress:v}=(0,c.A)(),{selectedBusinessUnit:C,selectedStore:S}=(0,A.rW)(),{cart:f,updateCart:x,setShippingMethod:M,redeemDiscount:P,removeDiscount:R}=(0,u.A)(C?.key,S?.key),D=w(),[U,L]=(0,i.useState)(),[O,W]=(0,i.useState)({});return(0,n.jsx)(a.A,{initialData:{shippingAddress:f?.shippingAddress&&!(0,g.R)(f.shippingAddress)?(0,d.v)(f?.shippingAddress):void 0,billingAddress:f?.billingAddress&&!(0,g.R)(f.billingAddress)?(0,d.v)(f?.billingAddress):void 0,shippingMethodId:f?.shippingInfo?.shippingMethodId},translations:{header:q("checkout.quote.checkout"),orderSummaryTitle:q("checkout.quote.summary"),orderSummarySubtitle:q("checkout.quote.items"),purchase:q("checkout.submit.quote.request")},buyerCanAddComment:!0,paymentMethods:D,discounts:(f?.discountCodes??[]).map(({discountId:e,name:t,code:s})=>({name:t??"",code:s??"",onRemove:async()=>!!(await R(e??"")).cartId})),transaction:{subtotal:f?.transaction.subtotal.centAmount??0,discounts:f?.transaction.discount.centAmount??0,shipping:{isEstimated:!f?.shippingInfo,amount:f?.transaction.shipping.centAmount??0},taxes:f?.transaction.tax.centAmount??0,total:f?.transaction.total.centAmount??0,currency:f?.transaction.total.currencyCode??"USD"},products:(f?.lineItems??[]).map(p.k),addresses:C?.addresses??[],shippingMethods:(f?.availableShippingMethods??[]).map(m.k),countryOptions:(s?.countries??[]).map(b.D).map(({name:e,code:t,states:s})=>({name:e,value:t,states:s.map(({name:e,code:t})=>({name:e,value:t}))})),termsAndConditionsLink:(0,r.s)(e.termsAndConditionsLink),onAddAddress:async e=>!!C?.key&&!!(await v({...(0,d.l)(e),businessUnitKey:C?.key})).businessUnitId,onApplyDiscount:async e=>!!(await P(e)).cartId,onCompleteAddresses:async(e,t)=>{if(!I)return!1;let s=await x({email:I.email,shipping:(0,d.l)(e),billing:(0,d.l)(t)});return s.success||l.A.error(s.error?.message||q("common.something.went.wrong"),{position:"top-right"}),s.success},onCompleteShipping:async e=>!!(await M(e)).cartId,onCompletePayment:async(e,t)=>{let s=D.find(t=>t.id===e);return!!s&&(L(s),W(t),!0)},onSubmitPurchase:async({buyerComment:e})=>{if(!U)return!1;let s=await U.makePayment({...O,buyerComment:e});return s?t.push(`/quote-thank-you?quoteRequestId=${s}`):l.A.error(q("common.something.went.wrong"),{position:"top-right"}),!!s}})}}};