"use strict";exports.id=2301,exports.ids=[2301],exports.modules={10655:(e,a,s)=>{s.d(a,{A:()=>d});var r=s(45512),l=s(58009),t=s(91494),n=s(15535),o=s(85762);let d=({children:e,content:a,icon:s,place:d="right",style:i={},iconWidth:m=20,iconHeight:c=20,className:u="",...p})=>{let x=(0,l.useId)(),h=s??t.A;return(0,r.jsxs)("div",{className:(0,o.p)("flex items-center gap-2",u),children:[e,(0,r.jsx)(h,{width:m,height:c,"data-tooltip-id":x,"data-tooltip-content":a}),(0,r.jsx)(n.m_,{id:x,place:d,style:{zIndex:10,maxWidth:230,...i},...p})]})}},20897:(e,a,s)=>{s.d(a,{A:()=>i});var r=s(45512),l=s(58009),t=s(688),n=s(25270),o=s(54047),d=s(62408);let i=({children:e,translations:a,onCancel:s,onConfirm:i,isOpen:m,disabled:c=!1,className:u=""})=>{let[p,x]=(0,o.A)(m,!1),h=(0,l.useCallback)(()=>x(!0),[x]),b=(0,l.useCallback)(()=>x(!1),[x]),[w,g]=(0,l.useState)(!1),{blockScroll:f}=(0,n.A)();(0,l.useEffect)(()=>(f(p),()=>f(!1)),[p,f]);let v=(0,l.useCallback)(()=>{s?.(),b()},[s,b]),j=(0,l.useCallback)(async()=>{g(!0),await i?.(),g(!1),b()},[i,b]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:u,onClick:h,children:e}),(0,r.jsxs)(d.A,{className:"lg:max-w-[400px]",isOpen:p,onRequestClose:v,closeButton:!0,children:[(0,r.jsxs)("div",{className:"px-6",children:[(0,r.jsx)("h4",{className:"pb-4 pt-6 text-20 font-semibold text-gray-800",children:a.title}),(0,r.jsx)("p",{className:"text-14 text-gray-700",children:a.summary})]}),(0,r.jsxs)("div",{className:"mt-5 flex items-center justify-end gap-3 border-t border-neutral-400 p-6",children:[(0,r.jsx)(t.default,{variant:"secondary",size:"m",className:"min-w-[112px]",onClick:v,children:a.cancel}),!c&&(0,r.jsx)(t.default,{variant:"warning",size:"m",className:"min-w-[112px]",onClick:j,loading:w,children:a.confirm})]})]})]})}},86758:(e,a,s)=>{s.d(a,{A:()=>o});var r=s(45512),l=s(58009),t=s(688),n=s(85762);let o=({children:e,translations:a,onCancel:s,onSubmit:o,unstyled:d=!1,classNames:i={},showCancelButton:m=!0,showSubmitButton:c=!0})=>{let[u,p]=(0,l.useState)(!1),x=(0,l.useCallback)(async e=>{e.preventDefault(),p(!0),await o?.(),p(!1)},[o]);return(0,r.jsxs)("form",{className:(0,n.p)({"rounded-md border-neutral-400 md:border md:p-5 md:pb-6":!d},i.form),onSubmit:x,children:[e,(0,r.jsxs)("div",{className:(0,n.p)("flex items-center gap-3",i.buttonsContainer,{"pt-8":c||m}),children:[m&&(0,r.jsx)(t.default,{variant:"secondary",size:"m",onClick:s,type:"button",className:"min-w-[112px]",children:a.cancel}),c&&(0,r.jsx)(t.default,{variant:"primary",size:"m",type:"submit",loading:u,className:"min-w-[112px]",children:a.submit})]})]})}},93001:(e,a,s)=>{s.d(a,{s:()=>r});let r={dashboard:"/dashboard",companyAdmin:"/company-admin",shoppingLists:"/purchase-lists",addresses:"/addresses",quotes:"/quotes",orders:"/orders",settings:"/settings",approvalRules:"/approval-rules",approvalFlows:"/approval-flows",shoppingListDetail:e=>`/purchase-list/${e.replace(/\s+/g,"-")}`,quoteDetail:e=>`/quote/${e.replace(/\s+/g,"-")}`,quoteRequestDetail:e=>`/quote-request/${e.replace(/\s+/g,"-")}`,orderDetail:e=>`/order/${e.replace(/\s+/g,"-")}`,approvalRuleDetail:e=>`/approval-rule/${e.replace(/\s+/g,"-")}`,approvalFlowDetail:e=>`/approval-flow/${e.replace(/\s+/g,"-")}`}},37436:(e,a,s)=>{s.d(a,{A:()=>b});var r=s(45512),l=s(71178),t=s(36601),n=s(80034),o=s(52178),d=s(1005),i=s(96904),m=s(19311),c=s(2812),u=s(35309),p=s(74891),x=s(21413),h=s(93001);let b=()=>{let{translate:e}=(0,n.A)(),[a]=(0,t.A)(l.L_),s={dashboard:{icon:(0,r.jsx)(r.Fragment,{}),name:e("common.dashboard"),summary:"",href:h.s.dashboard,disabled:!1,disabledMessage:"",order:1},orders:{icon:(0,r.jsx)(o.A,{}),name:e("common.orders"),summary:e("dashboard.orders.summary"),href:h.s.orders,disabled:!1,disabledMessage:"",order:2},quotes:{icon:(0,r.jsx)(d.A,{}),name:e("common.quotes"),summary:e("dashboard.quotes.summary"),href:h.s.quotes,disabled:!1,disabledMessage:"",order:3},companyAdmin:{icon:(0,r.jsx)(i.A,{}),name:e("common.company.admin"),summary:e("dashboard.company.admin.summary"),href:h.s.companyAdmin,disabled:!a,disabledMessage:e("dashboard.company.admin.disabled.on.small.screens"),order:a?4:999},purchaseLists:{icon:(0,r.jsx)(m.A,{}),name:e("common.purchase.lists"),summary:e("dashboard.purchase.lists.summary"),href:h.s.shoppingLists,disabled:!1,disabledMessage:"",order:5},approvalRules:{icon:(0,r.jsx)(c.A,{}),name:e("common.approval.rules"),summary:e("dashboard.approval.rules.summary"),href:h.s.approvalRules,disabled:!a,disabledMessage:e("dashboard.approval.rules.disabled.on.small.screen"),order:a?6:999},approvalFlows:{icon:(0,r.jsx)(u.A,{}),name:e("common.approval.flows"),summary:e("dashboard.approval.flows.summary"),href:h.s.approvalFlows,disabled:!1,disabledMessage:"",order:7},settings:{icon:(0,r.jsx)(p.A,{}),name:e("common.settings"),summary:e("dashboard.settings.summary"),href:h.s.settings,disabled:!1,disabledMessage:"",order:8},addresses:{icon:(0,r.jsx)(x.A,{}),name:e("common.addresses"),summary:e("dashboard.addresses.summary"),href:h.s.addresses,disabled:!1,disabledMessage:"",order:9}};return{sidebarItems:[s.dashboard,s.orders,s.quotes,s.companyAdmin,s.purchaseLists,s.approvalRules,s.approvalFlows,s.settings,s.addresses],cardItems:[s.orders,s.quotes,s.companyAdmin,s.purchaseLists,s.approvalRules,s.approvalFlows,s.settings,s.addresses]}}},62621:(e,a,s)=>{s.d(a,{A:()=>i});var r=s(45512);s(58009);var l=s(85762),t=s(28165);let n=({title:e,links:a=[]})=>(0,r.jsxs)("div",{className:"h-full w-fit bg-gray-100 px-7 py-10",children:[(0,r.jsx)("h6",{className:"px-5 text-12 font-medium uppercase text-gray-500",children:e}),(0,r.jsx)("div",{className:"mt-4 flex flex-col items-start gap-4",children:a.map(({name:e,href:a,openInNewTab:s,isActive:n})=>(0,r.jsx)(t.default,{className:(0,l.p)("w-full rounded-lg px-5 py-2 text-14 font-medium text-gray-600 hover:bg-neutral-300",{"bg-neutral-300":n}),href:a??"#",openInNewTab:s,underlineOnHover:!1,children:e},a))})]});var o=s(80034),d=s(37436);let i=({title:e,href:a,children:s,userName:l})=>{let{translate:t}=(0,o.A)(),{sidebarItems:i}=(0,d.A)();return(0,r.jsxs)("div",{className:"relative flex items-start gap-6 2xl:min-h-[calc(100vh-123px)]",children:[(0,r.jsx)("div",{className:"sticky top-[112px] hidden h-[calc(100vh-112px)] w-max shrink-0 2xl:block",children:(0,r.jsx)(n,{title:t("common.say.hi",{values:{name:l??""}}),links:i.map(e=>({...e,isActive:a===e.href}))})}),(0,r.jsxs)("div",{className:"box-border min-h-[calc(100vh-131px)] max-w-full grow px-4 pb-6 md:px-5 md:pb-7 lg:min-h-[calc(100vh-83px)] lg:px-12 lg:pb-9 2xl:min-h-[unset]",children:[e&&(0,r.jsx)("h1",{className:"py-6 text-18 font-extrabold text-gray-800 md:py-7 md:text-20 lg:py-9 lg:text-24",children:t(e)}),s]})]})}},32950:(e,a,s)=>{s.d(a,{A:()=>n});var r=s(58009),l=s(19217),t=s(77524);let n=()=>{let e=(0,r.useCallback)(()=>l.x.composableCommerce.businessUnit.getAssociateRoles(),[]),a=(0,t.Ay)("/action/buinsess-unit/getAssociateRoles",e);return{...a,data:a.data?.isError?[]:a.data?.data??[]}}},32301:(e,a,s)=>{s.r(a),s.d(a,{default:()=>z});var r=s(45512),l=s(58009),t=s(62621),n=s(80034),o=s(37974),d=s(28165),i=s(41866),m=s(10655);let c=()=>{let[e,a]=(0,l.useState)({newsletterPref:!1,passwordChange:!1,deleteAccount:!1}),s=(0,l.useCallback)((s,r)=>{a({...e,[s]:r})},[e]);return{accordionExpanded:e,expandAccordion:(0,l.useCallback)(e=>{s(e,!0)},[s]),collapseAccordion:(0,l.useCallback)(e=>{s(e,!1)},[s])}};var u=s(688),p=s(13481);let x=({onCancel:e,onChangePassword:a})=>{let{translate:s}=(0,n.A)(),[t,o]=(0,l.useState)({oldPassword:"",newPassword:"",confirmedNewPassword:""}),[d,i]=(0,l.useState)(""),[m,c]=(0,l.useState)(!1),x=(0,l.useCallback)(e=>{"newPassword"===e.target.name&&d&&i(""),o({...t,[e.target.name]:e.target.value})},[t,d]),h=(0,l.useCallback)(async e=>{e.preventDefault(),c(!0),await a?.(t.oldPassword,t.newPassword),o({oldPassword:"",newPassword:"",confirmedNewPassword:""}),c(!1)},[t.newPassword,t.oldPassword,a]),b=!t.oldPassword||!t.newPassword||!t.confirmedNewPassword||t.confirmedNewPassword!==t.newPassword;return(0,r.jsxs)("form",{onSubmit:h,children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)(p.A,{containerClassName:"w-[370px]",name:"oldPassword",label:s("dashboard.current.password"),required:!0,value:t.oldPassword,onChange:x}),(0,r.jsx)(p.A,{containerClassName:"w-[370px]",name:"newPassword",label:s("dashboard.new.password"),required:!0,value:t.newPassword,error:d,onChange:x}),(0,r.jsx)(p.A,{containerClassName:"w-[370px]",name:"confirmedNewPassword",label:s("dashboard.confirm.password"),required:!0,value:t.confirmedNewPassword,onChange:x,error:t.newPassword&&t.confirmedNewPassword&&t.newPassword!==t.confirmedNewPassword?s("dashboard.password.not.match"):""})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 pt-6",children:[(0,r.jsx)(u.default,{variant:"secondary",size:"m",onClick:e,type:"button",className:"min-w-[112px]",children:s("common.cancel")}),(0,r.jsx)(u.default,{variant:"primary",size:"m",type:"submit",disabled:b,loading:m,className:"min-w-[112px]",children:s("common.save")})]})]})};var h=s(62999),b=s(27034),w=s(20897),g=s(65593);let f=({onCancel:e,onDeleteAccount:a})=>{let{translate:s}=(0,n.A)(),t=(0,h.A)(),[o,d]=(0,l.useState)({password:""}),[i,m]=(0,l.useState)(!1),[c,x]=(0,l.useState)(!1),{selectedBusinessUnit:f}=(0,g.rW)(),v=f?.associates?.length===1,j=(0,l.useCallback)(e=>{d({...o,[e.target.name]:e.target.value})},[o]),y=(0,l.useCallback)(async()=>{m(!0),!0===await a?.(o.password)?t.push("/login"):b.A.error(s("dashboard.failed.to.delete.account"),{position:"top-right"}),m(!1)},[a,o,t,s]),N=!o.password;return(0,r.jsxs)("form",{children:[(0,r.jsx)("p",{className:"pb-4 text-14 text-gray-700",children:s("dashboard.cannot.regain.access")}),(0,r.jsx)(p.A,{containerClassName:"w-[370px]",name:"password",label:s("dashboard.password.confirmation"),required:!0,value:o.password,onChange:j}),(0,r.jsxs)("div",{className:"flex items-center gap-3 pt-6",children:[(0,r.jsx)(u.default,{variant:"secondary",size:"m",onClick:e,type:"button",className:"min-w-[112px]",children:s("common.cancel")}),(0,r.jsx)(w.A,{translations:{title:s("account.delete.account"),summary:s(v?"dashboard.associate.delete.disabled":"dashboard.cannot.regain.access"),cancel:s("common.cancel"),confirm:s("common.delete")},isOpen:c,onCancel:()=>x(!1),disabled:v,onConfirm:y,children:(0,r.jsx)(u.default,{variant:"warning",size:"m",type:"button",disabled:N,loading:i,onClick:()=>x(!0),className:"min-w-[112px]",children:s("common.delete")})})]})]})},v=({account:e,businessUnitOptions:a,onChangePassword:s,onDeleteAccount:l})=>{let{translate:t}=(0,n.A)(),u=[{name:t("common.name"),value:`${e.firstName} ${e.lastName}`},{name:t("common.email"),value:e.email}],p=[{name:t("common.business.unit"),value:a.find(a=>a.value===e.businessUnit)?.name},{name:t("common.role"),value:e.roles.join(", ")}],{accordionExpanded:h,expandAccordion:b,collapseAccordion:w}=c();return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"relative rounded-md border border-neutral-400 p-4 md:py-6",children:[(0,r.jsx)("div",{className:"flex flex-col gap-6",children:u.map(({name:e,value:a},s)=>(0,r.jsxs)("div",{className:"text-14 text-gray-700",children:[(0,r.jsx)("p",{className:"text-14 font-medium leading-normal",children:e}),(0,r.jsx)("span",{className:"mt-3 block text-14 leading-normal",children:a})]},s))}),(0,r.jsx)(d.default,{"aria-label":t("account.personal.info.edit"),href:"?subPath=edit-personal-info",className:"absolute right-4 top-4",children:(0,r.jsx)(o.A,{width:20,height:20})})]}),(0,r.jsxs)("div",{className:"relative mt-4 rounded-md border border-neutral-400 p-4 md:mt-5 md:py-6",children:[(0,r.jsx)("div",{className:"flex flex-col gap-6",children:p.map(({name:e,value:a},s)=>(0,r.jsxs)("div",{className:"text-14 text-gray-700",children:[(0,r.jsx)("p",{className:"text-14 font-medium leading-normal",children:e}),(0,r.jsx)("span",{className:"mt-3 block text-14 leading-normal",children:a})]},s))}),(0,r.jsx)(m.A,{content:t("dashboard.modification.prohibited"),className:"absolute right-4 top-4"})]}),(0,r.jsxs)("div",{className:"mt-7 md:mt-9 lg:mt-11",children:[(0,r.jsx)("h2",{className:"font-extrabold text-gray-800 md:text-18 lg:text-20",children:t("common.integrity")}),(0,r.jsxs)("div",{className:"mt-4 md:mt-5 lg:mt-6",children:[(0,r.jsxs)(i.A,{className:"rounded-b-none border-b-transparent",isExpanded:h.passwordChange,onExpand:()=>b("passwordChange"),onCollapse:()=>w("passwordChange"),children:[(0,r.jsx)(i.A.Button,{className:"text-14 font-medium leading-normal",children:t("dashboard.change.your.password")}),(0,r.jsx)(i.A.Panel,{children:(0,r.jsx)(x,{onCancel:()=>w("passwordChange"),onChangePassword:s})})]}),(0,r.jsxs)(i.A,{className:"rounded-t-none",isExpanded:h.deleteAccount,onExpand:()=>b("deleteAccount"),onCollapse:()=>w("deleteAccount"),children:[(0,r.jsx)(i.A.Button,{className:"text-14 font-medium leading-[14px]",children:t("dashboard.delete.your.account")}),(0,r.jsx)(i.A.Panel,{children:(0,r.jsx)(f,{onCancel:()=>w("deleteAccount"),onDeleteAccount:l})})]})]})]})]})};var j=s(1916),y=s(6505),N=s(72190),A=s(93001);let C=(e,a)=>{let s={};for(let r in e)a[r]!==e[r]&&(s[r]=e[r]);return s};var k=s(32950);let P=()=>{let{data:e}=(0,k.A)();return{roleOptions:e.map(({name:e,key:a})=>({name:e??"",value:a??""}))}};var q=s(79334),S=s(86758),L=s(26381);let R=({onUpdateAccount:e,account:a})=>{let{translate:s}=(0,n.A)(),t=(0,q.useRouter)(),[o,d]=(0,l.useState)(a),i=(0,l.useCallback)(e=>{d({...o,[e.target.name]:e.target.value})},[o]),m=(0,l.useCallback)(async()=>{await e?.(o),t.back()},[e,o,t]),c={pattern:"[A-Za-z\\s\\.]+",title:s("common.name.validation")};return(0,r.jsx)(S.A,{translations:{cancel:s("common.cancel"),submit:s("common.save")},onSubmit:m,onCancel:t.back,children:(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)(L.A,{name:"email",label:s("common.email"),required:!0,type:"email",value:o.email??"",onChange:i,containerClassName:"w-full min-w-[unset] md:w-[350px] lg:w-[400px]"}),(0,r.jsx)(L.A,{name:"firstName",label:s("common.firstName"),required:!0,value:o.firstName??"",...c,onChange:i,containerClassName:"w-full min-w-[unset] md:w-[350px] lg:w-[400px]"}),(0,r.jsx)(L.A,{name:"lastName",label:s("common.lastName"),required:!0,value:o.lastName??"",...c,onChange:i,containerClassName:"w-full min-w-[unset] md:w-[350px] lg:w-[400px]"})]})})},M=e=>{let a=(0,q.useSearchParams)().get("subPath"),s=(0,l.useMemo)(()=>{let s={"edit-personal-info":{title:"dashboard.personal.info.edit",Component:(0,r.jsx)(R,{...e})}};if(a&&Object.keys(s).includes(a))return s[a]},[a,e]);return{subPath:a,ActiveSubPath:s}},z=()=>{let{account:e,updateAccount:a,changePassword:s,deleteAccount:l,logout:n}=(0,j.A)(),o=(0,h.A)(),{businessUnits:d}=(0,N.A)(),{selectedBusinessUnit:i}=(0,g.rW)(),{roles:m,isAdmin:c}=(0,y.A)(i?.key),{roleOptions:u}=P(),p={account:{firstName:e?.firstName??"",lastName:e?.lastName??"",email:e?.email??"",businessUnit:d?.[0]?.key??"",roles:m.filter(e=>!!e.key).map(e=>e.key)},businessUnitOptions:d.map(({name:e,key:a})=>({name:e??a??"",value:a??""})),roleOptions:u,isAdmin:c,onUpdateAccount:async s=>{e&&await a(C(s,e))},onChangePassword:async(e,a)=>{await s(e,a)},onDeleteAccount:async e=>{let a=await l(e);return a.success&&(await n(),o.refresh()),a.success}},{ActiveSubPath:x}=M(p);return(0,r.jsx)(t.A,{title:x?.title??"account.settings.security",href:A.s.settings,userName:e?.firstName,children:x?.Component??(0,r.jsx)(v,{...p})})}},37974:(e,a,s)=>{s.d(a,{A:()=>l});var r=s(58009);let l=r.forwardRef(function({title:e,titleId:a,...s},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":a},s),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))})}};