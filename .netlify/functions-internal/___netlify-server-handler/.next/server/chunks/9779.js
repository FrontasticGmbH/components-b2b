"use strict";exports.id=9779,exports.ids=[9779],exports.modules={10655:(e,t,r)=>{r.d(t,{A:()=>o});var s=r(45512),a=r(58009),l=r(91494),n=r(15535),i=r(85762);let o=({children:e,content:t,icon:r,place:o="right",style:d={},iconWidth:c=20,iconHeight:m=20,className:u="",...p})=>{let x=(0,a.useId)(),h=r??l.A;return(0,s.jsxs)("div",{className:(0,i.p)("flex items-center gap-2",u),children:[e,(0,s.jsx)(h,{width:c,height:m,"data-tooltip-id":x,"data-tooltip-content":t}),(0,s.jsx)(n.m_,{id:x,place:o,style:{zIndex:10,maxWidth:230,...d},...p})]})}},55360:(e,t,r)=>{r.d(t,{A:()=>p});var s=r(45512);r(58009);var a=r(96848),l=r(80034),n=r(688),i=r(28165),o=r(42378),d=r(94796);let c=({status:e})=>{let{translate:t}=(0,l.A)();return(0,s.jsx)(d.A,{className:"capitalize",variant:{Pending:"warning",Confirmed:"primary",Cancelled:"danger",Returned:"secondary",Delivered:"success",Shipped:"primary"}[e],children:t(`orders.status.${e.toLowerCase()}`)})};var m=r(93001),u=r(41866);let p=({orders:e,pagination:t})=>{let{translate:r}=(0,l.A)(),{formatCurrency:d}=(0,o.A)();return(0,s.jsxs)(a.A,{children:[(0,s.jsxs)(a.A.Container,{className:"hidden table-fixed rounded-md md:table",children:[(0,s.jsxs)(a.A.Head,{className:"border-b text-12 font-bold",children:[(0,s.jsx)(a.A.Cell,{isHeadCell:!0,children:r("common.status")}),(0,s.jsx)(a.A.Cell,{isHeadCell:!0,children:r("common.id")}),(0,s.jsx)(a.A.Cell,{isHeadCell:!0,children:r("common.date")}),(0,s.jsx)(a.A.Cell,{isHeadCell:!0,children:r("common.business.unit")}),(0,s.jsx)(a.A.Cell,{isHeadCell:!0,className:"text-right",children:r("common.total")}),(0,s.jsx)(a.A.Cell,{isButtonsHead:!0})]}),(0,s.jsx)(a.A.Body,{children:(e??[]).map(({id:e,number:t,status:l,creationDate:o,businessUnit:u,total:p,currency:x})=>(0,s.jsxs)(a.A.Row,{children:[(0,s.jsx)(a.A.Cell,{children:(0,s.jsx)("div",{className:"flex items-center justify-between gap-2",children:(0,s.jsx)(c,{status:l})})}),(0,s.jsx)(a.A.Cell,{children:(0,s.jsx)("span",{className:"block max-w-full truncate",children:t})}),(0,s.jsx)(a.A.Cell,{children:new Date(o).toLocaleDateString()}),(0,s.jsx)(a.A.Cell,{children:(0,s.jsx)("p",{className:"w-36 truncate lg:w-full",children:u})}),(0,s.jsx)(a.A.Cell,{className:"text-right",children:d(p,x)}),(0,s.jsx)(a.A.Cell,{isButtonsCell:!0,children:(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(i.default,{href:m.s.orderDetail(e),underlineOnHover:!1,children:(0,s.jsx)(n.default,{variant:"secondary",children:r("common.view")})})})})]},e))})]}),(0,s.jsxs)(a.A.Container,{className:"table rounded-md md:hidden",children:[(0,s.jsx)(a.A.Head,{className:"border-b text-12 font-bold",children:(0,s.jsx)(a.A.Row,{children:(0,s.jsx)(a.A.Cell,{isHeadCell:!0,children:r("common.id")})})}),(0,s.jsx)(a.A.Body,{children:(e??[]).map(({id:e,number:t,status:l,creationDate:o,businessUnit:p,total:x,currency:h})=>(0,s.jsx)(a.A.Row,{children:(0,s.jsx)(a.A.Cell,{children:(0,s.jsxs)(u.A,{className:"border-none text-gray-600",children:[(0,s.jsxs)(u.A.Button,{defaultSpacing:!1,children:[(0,s.jsx)("p",{className:"font-semibold",children:t}),(0,s.jsx)("p",{className:"my-2 text-14 text-gray-500",children:new Date(o).toLocaleDateString()}),(0,s.jsx)("div",{className:"",children:(0,s.jsx)(c,{status:l})})]}),(0,s.jsxs)(u.A.Panel,{defaultSpacing:!1,children:[(0,s.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,s.jsxs)("p",{className:"basis-32 font-semibold uppercase",children:[" ",r("common.business.unit"),":"]}),(0,s.jsx)("p",{className:"w-48 truncate",children:p})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("p",{className:"basis-32 font-semibold uppercase",children:[r("common.total"),":"]}),(0,s.jsx)("p",{children:d(x,h)})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(i.default,{href:m.s.orderDetail(e),underlineOnHover:!1,children:(0,s.jsx)(n.default,{variant:"secondary",children:r("common.view")})})})]})]})})},e))})]}),t&&(0,s.jsx)(a.A.Pagination,{page:t.page,limit:t.limit,totalItems:t.totalItems,onNext:t.onNext,onPrevious:t.onPrevious,onRowsPerPageChange:t.onRowsPerPageChange})]})}},74071:(e,t,r)=>{r.d(t,{A:()=>i});var s=r(58009),a=r(77524),l=r(35032),n=r(19217);let i=({businessUnitKey:e,filters:{searchQuery:t,status:r,cursor:i}={}})=>{let{data:o,...d}=(0,a.Ay)(e?["/action/business-unit/queryApprovalFlows",e,t,r]:null,()=>n.x.composableCommerce.businessUnit.queryApprovalFlows({businessUnitKey:e,approvalFlowIds:[...t?[t]:[]],approvalFlowStatus:[...r?[r]:[]],cursor:i,sortAttributes:[{createdAt:"desc"}]})),c=!e||d.isLoading,{mutate:m}=(0,l.iX)(),u=(0,s.useCallback)(()=>{m(e=>"object"==typeof e&&e?.[0].startsWith("/action/business-unit/queryApprovalFlows"),void 0,{revalidate:!0})},[m]),p=o?.isError?[]:o?.data?.items??[],x=o?.isError?0:o?.data.total??0,[h,j]=o?.isError?[void 0,void 0]:[o?.data.previousCursor,o?.data.nextCursor];return{approvalFlows:p,isLoading:c,totalItems:x,previousCursor:h,nextCursor:j,approveApprovalFlow:(0,s.useCallback)(async t=>{if(!e)return;let r=await n.x.composableCommerce.businessUnit.approveApprovalFlow({approvalFlowId:t},{approvalFlowId:t});return!r?.isError&&r.data.approvalFlowId&&u(),r.isError?null:r.data},[e,u]),rejectApprovalFlow:(0,s.useCallback)(async(t,r)=>{if(!e)return;let s=await n.x.composableCommerce.businessUnit.rejectApprovalFlow({approvalFlowId:t,reason:r??""},{approvalFlowId:t,reason:r??""});return!s?.isError&&s.data.approvalFlowId&&u(),s.isError?null:s.data},[e,u]),mutateAll:u}}},83600:(e,t,r)=>{r.d(t,{A:()=>i});var s=r(58009),a=r(19217),l=r(35032),n=r(77524);let i=({cursor:e,limit:t,states:r,ids:i,businessUnitKey:o,createdFrom:d,createdTo:c,sortAttributes:m})=>{let{mutate:u}=(0,l.iX)(),p=(0,n.Ay)(o?["/action/cart/queryOrders",t,e,i,r,d,c,o,m]:null,()=>a.x.composableCommerce.cart.queryOrders({...t?{limit:t}:{},...e?{cursor:e}:{},...i?{orderNumbers:i}:{},...r?{orderStates:r}:{},...d?{createdFrom:d}:{},...c?{createdTo:c}:{},...o?{businessUnitKey:o}:{},...m?{sortAttributes:m}:""}),{revalidateIfStale:!0}),x=!o||p.isLoading,h=(0,s.useCallback)(()=>{u(e=>"object"==typeof e&&e?.[0]==="/action/cart/queryOrders")},[u]);return{orders:p.data?.isError?{}:p.data?.data??{},isLoading:x,cancelOrder:(0,s.useCallback)(async e=>{if(!e.orderNumber||!o)return{};let t=await a.x.composableCommerce.cart.cancelOrder({orderId:e.orderNumber},{businessUnitKey:o});return h(),t.isError?{}:t.data},[o,h]),replicateOrder:(0,s.useCallback)(async e=>{let t=await a.x.composableCommerce.cart.replicateOrder({orderId:e},{businessUnitKey:o});return h(),t.isError?{}:t.data},[o,h])}}},9779:(e,t,r)=>{r.r(t),r.d(t,{default:()=>N});var s=r(45512),a=r(62621),l=r(58009),n=r.n(l),i=r(28165);let o=({icon:e,title:t,summary:r})=>{let a=(0,l.useCallback)(()=>n().isValidElement(e)?n().cloneElement(e,{...e.props,className:`${e.props.className??""} w-full h-full`}):e,[e]);return(0,s.jsxs)("div",{className:"flex w-full items-center gap-4 rounded-md border border-neutral-400 px-5 py-6 md:gap-5",children:[(0,s.jsx)("div",{className:"box-content rounded-full bg-neutral-300 p-5",children:(0,s.jsx)("span",{className:"block size-[20px] text-primary md:size-[24px] lg:size-[28px]",children:a()})}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("h5",{className:"text-14 font-semibold leading-normal text-gray-700",children:t}),(0,s.jsx)("p",{className:"text-14 leading-loose text-gray-600",children:r})]})]})};var d=r(10655),c=r(92321),m=r(96069),u=r(73475),p=r(80034),x=r(25306),h=r(37436),j=r(55360),A=r(93001);let b=({orders:e,hasPendingApprovalFlows:t})=>{let{translate:r}=(0,p.A)(),{cardItems:a}=(0,h.A)(),[n,b]=(0,l.useState)({}),{ref:v}=(0,u.A)(()=>b({}));return(0,s.jsxs)("div",{className:"flex flex-col",children:[t&&(0,s.jsxs)(x.A,{variant:"warning",className:"mt-3",children:[r("dashboard.approval.flows.approve.ask")," ",(0,s.jsx)(i.default,{href:A.s.approvalFlows,className:"underline",children:r("dashboard.approval.flows.section").toLowerCase()})]}),(0,s.jsx)("h1",{className:"py-6 text-18 font-extrabold text-gray-800 md:py-7 md:text-20 lg:py-9 lg:text-24",children:r("common.dashboard")}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3",ref:v,children:a.map(({icon:e,name:t,summary:r,href:a,disabled:l,disabledMessage:c,order:u})=>(0,s.jsxs)("div",{className:"relative",style:{order:u},onClick:()=>b({[a]:!0}),children:[(0,s.jsx)(i.default,{href:a,className:`block w-full ${l?"opacity-50":""}`,underlineOnHover:!1,...l?{onClick:e=>e.preventDefault()}:{},children:(0,s.jsx)(o,{icon:e,title:t,summary:r})}),l&&(0,s.jsx)(d.A,{isOpen:!!n[a],setIsOpen:e=>b({...n,[a]:e}),icon:m.A,className:"absolute right-3 top-3",content:c})]},a))}),(0,s.jsxs)("div",{className:"mt-7 md:mt-9 lg:mt-11",children:[(0,s.jsx)("h2",{className:"mb-4 text-16 font-extrabold text-gray-800 md:mb-5 md:text-18 lg:mb-6 lg:text-20",children:r("common.orders.latest")}),e&&e.length>0?(0,s.jsx)(j.A,{orders:e}):(0,s.jsx)(c.A,{header:r("common.no.results.found")})]})]})};var v=r(1916),f=r(83600),g=r(65593),y=r(67726),C=r(72190),w=r(74071);let N=()=>{let{account:e}=(0,v.A)(),{businessUnits:t}=(0,C.A)(),{selectedBusinessUnit:r}=(0,g.rW)(),{approvalFlows:l}=(0,w.A)({businessUnitKey:r?.key,filters:{status:"Pending"}}),{orders:n}=(0,f.A)({limit:5,businessUnitKey:r?.key,sortAttributes:[{createdAt:"desc"}]});return(0,s.jsx)(a.A,{href:A.s.dashboard,userName:e?.firstName,children:(0,s.jsx)(b,{orders:(n.items??[]).map(e=>(0,y.x)(e,{businessUnits:t})),hasPendingApprovalFlows:l.length>0})})}},77269:(e,t,r)=>{r.d(t,{k:()=>s});let s=e=>{let t=e.variant,r=(e.price?.centAmount??t?.price?.centAmount??0)-(e.taxRate?.includedInPrice?e.taxed?.taxAmount?.centAmount??0:0),s=e.discountedPrice?.centAmount??t?.discountedPrice?.centAmount,a=e.price?.fractionDigits??t?.price?.fractionDigits??2,l=e.price?.currencyCode??t?.price?.currencyCode??"USD";return{id:e.lineItemId,url:e._url,sku:t?.sku,name:e.name,description:t?.attributes?.["Product-Specifications"],images:t?.images,quantity:e.count,price:r/Math.pow(10,a),...s?{discountedPrice:s/Math.pow(10,a)}:{},currency:l,inStock:t?.isOnStock,maxQuantity:t?.isOnStock?t.availableQuantity:0,model:t?.sku}}},67726:(e,t,r)=>{r.d(t,{x:()=>n});var s=r(75669),a=r(77269);let l=e=>"Delivered"===e.shipmentState||"Complete"===e.orderState?"Delivered":"Open"===e.orderState?"Pending":"Confirmed"===e.orderState?"Shipped"===e.shipmentState?"Shipped":"Confirmed":"Returned",n=(e,{businessUnits:t}={})=>{let r=e.sum?.currencyCode??"USD",n=l(e),{total:i,subtotal:o,tax:d,discount:c,shipping:m}=(0,s.$)(e);return{id:e.orderId??"",number:e.orderNumber??"",businessUnit:t?.find(t=>t.key===e.businessUnitKey)?.name??e.businessUnitKey??"",creationDate:e.createdAt?new Date(e.createdAt).toISOString():"",status:n,items:(e.lineItems??[]).map(a.k),currency:r,taxCosts:d.centAmount,subtotal:o.centAmount,discount:c.centAmount,shippingCosts:m.centAmount,total:i.centAmount,isFromAQuote:!!e.quoteId,purchaseOrderNumber:e.purchaseOrderNumber}}},96069:(e,t,r)=>{r.d(t,{A:()=>a});var s=r(58009);let a=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))})}};