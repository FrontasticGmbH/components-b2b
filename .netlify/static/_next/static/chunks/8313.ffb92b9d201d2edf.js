"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8313],{23928:(e,o,t)=>{var n,r;let i;Object.defineProperty(o,"__esModule",{value:!0}),o.close=o.paymentFlow=o.checkoutFlow=o.checkout=o.createModal=o.addMessageEventListener=o.CheckoutMode=void 0;let c=t(3873),s=t(13646);!function(e){e.completeFlow="complete-flow",e.paymentOnly="payment-only"}(n||(o.CheckoutMode=n={}));let l="commercetools-checkout",a=document.body.style.overflow,d=()=>{let e=document.querySelectorAll("[data-ctc]");return e.length>0&&(e[0]instanceof HTMLDivElement||e[0]instanceof HTMLSpanElement)?e[0]:null};(r||(r={})).InitCheckout="init_checkout";let u=()=>{if(window.commercetoolsCheckout&&window.commercetoolsCheckout.root&&window.commercetoolsCheckout.root.unmount)window.commercetoolsCheckout.root.unmount();else{let e=d();e&&(e.innerHTML="")}let e=document.getElementById(l);e&&(document.body.style.overflow=a,e.remove()),i&&window.removeEventListener("message",i)};o.addMessageEventListener=e=>{i=({origin:o,data:t})=>{var n;if(o===window.location.origin){if((null==t?void 0:t.code)==="checkout_cancelled"&&u(),(null==t?void 0:t.code)==="checkout_loaded"){let o=Object.assign({},(0,s.getCheckoutConfig)());window.postMessage({code:r.InitCheckout,payload:Object.assign(Object.assign({},o),{checkoutMode:e})},window.location.origin)}if((null==t?void 0:t.code)==="checkout_completed"){u();let{id:e}=(null===(n=null==t?void 0:t.payload)||void 0===n?void 0:n.order)||{},{callbackUrl:o,returnUrl:r}=(0,s.getCheckoutConfig)();r?window.location.href=`${r}?orderId=${e}`:o&&(window.location.href=`${o}?orderId=${e}`)}}},window.addEventListener("message",i)};let p=async(e=n.completeFlow)=>{if(u(),(0,o.addMessageEventListener)(e),!d()){let e=document.createElement("div");e.setAttribute("id",l),document.body.appendChild(e),document.body.style.overflow="hidden"}if("object"==typeof window.commercetoolsCheckout&&"function"==typeof window.commercetoolsCheckout.render)window.commercetoolsCheckout.render();else{let e=document.createElement("script");e.src=`${(0,s.getAppHost)()}/main.js`,e.onerror=()=>console.log(`[ctc] Error loading checkout script on ${e.src}`),document.head.appendChild(e)}};o.createModal=p,o.checkout=e=>{(0,s.updateCheckoutConfig)(e),(0,o.createModal)()},o.checkoutFlow=e=>{if("object"!=typeof e)throw Error("Bad config, please review docs");(0,s.updateCheckoutConfig)(e,!0),(0,c.handleCustomSubscriptions)(e,!0),(0,c.handleDefaultSubscriptions)(e,!0),(0,o.createModal)()},o.paymentFlow=e=>{if("object"!=typeof e)throw Error("Bad config, please review docs");(0,s.updateCheckoutConfig)(e,!0),(0,c.handleCustomSubscriptions)(e,!0),(0,c.handleDefaultSubscriptions)(e,!0),(0,o.createModal)(n.paymentOnly)},o.close=()=>{u()}},78313:function(e,o,t){var n=this&&this.__createBinding||(Object.create?function(e,o,t,n){void 0===n&&(n=t);var r=Object.getOwnPropertyDescriptor(o,t);(!r||("get"in r?!o.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return o[t]}}),Object.defineProperty(e,n,r)}:function(e,o,t,n){void 0===n&&(n=t),e[n]=o[t]}),r=this&&this.__exportStar||function(e,o){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(o,t)||n(o,e,t)};Object.defineProperty(o,"__esModule",{value:!0}),r(t(23928),o),r(t(3873),o),r(t(32287),o)},3873:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.init=o.handleDefaultSubscriptions=o.handleCustomSubscriptions=void 0;let n=t(13646),r=t(32287),i={};o.handleCustomSubscriptions=(e,o)=>{[["info","onInfo"],["warn","onWarn"],["error","onError"]].forEach(t=>{let n=t[0],c=t[1];o&&i[c]&&(0,r.unsubscribe)(i[c]),"function"==typeof e[c]&&(i[c]&&(0,r.unsubscribe)(i[c]),i[c]=(0,r.subscribe)(`${n}:*`,e[c]))})},o.handleDefaultSubscriptions=(e,o)=>{[["info","logInfo"],["warn","logWarn"],["error","logError"]].forEach(t=>{let n=t[0],c=t[1];o&&i[c]&&(0,r.unsubscribe)(i[c]),!0===e[c]&&(i[c]&&(0,r.unsubscribe)(i[c]),i[c]=(0,r.subscribe)(`${n}:*`,function(e){void 0!==e.payload?console[n]("[ctc]",e.code,e.payload):console[n]("[ctc]",e.code)}))})},o.init=e=>{if("object"!=typeof e)throw Error("Bad config, please review docs");"object"==typeof e.checkoutConfig&&(0,n.updateCheckoutConfig)(e.checkoutConfig),(0,o.handleCustomSubscriptions)(e),(0,o.handleDefaultSubscriptions)(e)}},13646:(e,o,t)=>{var n=t(87358);Object.defineProperty(o,"__esModule",{value:!0}),o.updateCheckoutConfig=o.getCheckoutConfig=o.getAppHost=o.MissingConfigurationField=void 0;let r={};class i extends Error{constructor(e){super(`Missing field in the configuration: ${e}`),Object.setPrototypeOf(this,i.prototype)}}o.MissingConfigurationField=i,o.getAppHost=()=>{if(!r.region&&!r.host)throw new i("region");return r.region&&r.region.startsWith("http")?r.region:r.region?`https://app.checkout.${r.region}.commercetools.com`:r.host},o.getCheckoutConfig=()=>r,o.updateCheckoutConfig=(e,o=!1)=>(o&&(r={}),r={skipConfirmationPages:"skipConfirmationPages"in e?e.skipConfirmationPages:r.skipConfirmationPages,accessToken:"accessToken"in e?e.accessToken:r.accessToken,applicationId:"applicationId"in e?e.applicationId:r.applicationId,applicationKey:"applicationKey"in e?e.applicationKey:r.applicationKey,callbackUrl:"callbackUrl"in e?e.callbackUrl:r.callbackUrl,returnUrl:"returnUrl"in e?e.returnUrl:r.returnUrl,sellerId:"sellerId"in e?e.sellerId:r.sellerId,cartId:"cartId"in e?e.cartId:r.cartId,host:"host"in e?e.host:r.host,paymentReference:"paymentReference"in e?e.paymentReference:r.paymentReference,locale:"locale"in e?e.locale:r.locale,projectKey:"projectKey"in e?e.projectKey:r.projectKey,storeKey:"storeKey"in e?e.storeKey:r.storeKey,styles:"styles"in e?e.styles:r.styles,languageOverrides:"languageOverrides"in e?e.languageOverrides:r.languageOverrides,forms:"forms"in e?e.forms:r.forms,currencyLocale:"currencyLocale"in e?e.currencyLocale:r.currencyLocale,showTaxes:"showTaxes"in e?e.showTaxes:r.showTaxes,sessionId:"sessionId"in e?e.sessionId:r.sessionId,region:"region"in e?e.region:r.region,browserSdkVersion:n.env.__VERSION__})},32287:(e,o)=>{var t;Object.defineProperty(o,"__esModule",{value:!0}),o.unsubscribe=o.subscribe=o.filterMessages=o.matches=o.typeMatches=o.Severity=void 0,function(e){e.INFO="info",e.WARN="warn",e.ERROR="error"}(t||(o.Severity=t={})),o.typeMatches=e=>t=>{if(!e||!t)return!1;if("*"===e||t===e)return!0;let n=e.split(":"),r=t.split(":");return!!r[0]&&n[0]===r[0]&&(0,o.typeMatches)(n.slice(1).join(":"))(r.slice(1).join(":"))},o.matches=e=>t=>(0,o.typeMatches)(e)(t.type),o.filterMessages=(e,t)=>e.filter((0,o.matches)(t));let n={};o.subscribe=(e,t)=>{let r=`${e}_${Math.round(1e15*Math.random())}`,i=({origin:n,data:r})=>{if(n!==window.location.origin||"commercetoolsCheckout"!==r.source)return;let i=r||{};(0,o.typeMatches)(e)(i.type)&&t(i)};return window.addEventListener("message",i),n[r]=i,r},o.unsubscribe=e=>window.removeEventListener("message",n[e])}}]);
//# sourceMappingURL=8313.ffb92b9d201d2edf.js.map