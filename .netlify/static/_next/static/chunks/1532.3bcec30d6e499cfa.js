(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1532],{39164:(e,t,l)=>{"use strict";l.d(t,{A:()=>N});var r=l(95155),a=l(12115),n=l(60410),o=l(47234),s=l(15033),d=l(77296);let i=a.createContext({}),c=e=>{let{children:t,value:{size:l,disabled:n,onChange:o,value:c,className:u,defaultValue:m}}=e,{isOpen:x,onOpen:v,onClose:p,onToggle:h}=(0,d.A)(),[g,f]=(0,s.A)(c,[]),j=(0,a.useCallback)(e=>{null==o||o(e),f(e),p()},[o,f,p]);return(0,r.jsx)(i.Provider,{value:{size:l,disabled:n,handleChange:j,value:g,className:u,defaultValue:m,isExpanded:x,onExpand:v,onCollapse:p,onToggle:h},children:t})},u=()=>(0,a.useContext)(i);var m=l(1257),x=l(39275);let v=e=>{let{children:t}=e,{handleChange:l,className:a,value:n,disabled:s,defaultValue:d,onCollapse:i}=u(),{ref:c}=(0,x.A)(i);return(0,r.jsx)("div",{ref:c,className:(0,o.p)("relative",a),children:(0,r.jsx)(m.W,{value:null!=n?n:[],defaultValue:d,onChange:l,disabled:s,multiple:!0,children:t})})};var p=l(32112),h=l(40036);let g=e=>{let{disabled:t,size:l}=e,r=(0,h.F)({intent:{active:"cursor-default border-gray-300 bg-white text-gray-700 focus:shadow-200 active:border-neutral-800",disabled:"cursor-not-allowed border-neutral-200 bg-neutral-200 text-neutral-800"},size:{sm:"h-[32px]",lg:"h-[40px]"}});return{buttonClassName:(0,o.p)("relative w-full rounded-md border pl-3 pr-10 text-left text-14 focus:outline-none",r("intent.".concat(t?"disabled":"active")),r("size.".concat(l)))}};var f=l(3757),j=l(26505);let b=e=>{let{children:t,value:l,defaultValue:a,onChange:n,disabled:o,className:s,size:d="lg"}=e;return(0,r.jsx)(c,{value:{onChange:n,value:l,defaultValue:a,disabled:o,className:s,size:d},children:(0,r.jsx)(v,{children:t})})};b.Button=e=>{var t,l;let{children:a,className:s}=e,{translate:d}=(0,n.A)(),{disabled:i,size:c,value:x,defaultValue:v,onToggle:h,isExpanded:f}=u(),{buttonClassName:j}=g({disabled:i,size:c});return(0,r.jsxs)(m.W.Button,{"aria-label":d("common.select"),className:(0,o.p)(s,j),onClick:h,children:[(0,r.jsx)("div",{className:"block truncate",children:"function"==typeof a?a({selected:null!==(l=null===(t=x&&0!==x.length?x:v)||void 0===t?void 0:t.map(e=>({value:e})))&&void 0!==l?l:[],isExpanded:f}):a}),(0,r.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:(0,r.jsx)(p.A,{className:"h-[18px]","aria-hidden":"true"})})]})},b.Options=e=>{let{children:t,className:l}=e,{isExpanded:n}=u();return(0,r.jsx)(f.e,{show:n,as:a.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)(m.W.Options,{static:!0,className:(0,o.p)("absolute z-50 mt-1 max-h-60 w-full min-w-fit overflow-y-auto rounded-md bg-white py-1 text-base shadow-400 focus:outline-none",l),children:t})})},b.Option=e=>{let{children:t,value:l}=e,{value:a,defaultValue:n}=u(),s=!!(l&&((null==a?void 0:a.includes(l))||(null==n?void 0:n.includes(l))));return(0,r.jsx)(m.W.Option,{className:(0,o.p)("relative cursor-default select-none"),value:l,children:(0,r.jsxs)("div",{className:(0,o.p)("flex items-center justify-between gap-5 truncate px-3 py-[10px] text-14 text-gray-700 hover:bg-neutral-200 lg:py-1",{"bg-neutral-200":s}),children:[t,(0,r.jsx)(j.A,{checked:s})]})},l)};var y=l(88989),C=l(70533);let N=e=>{let{label:t,required:l,requiredStyle:s="asterisk",showOptionalLabel:d=!1,options:i=[],placeholder:c="",enableSearch:u=!1,menuTop:m,...x}=e,{translate:v}=(0,n.A)(),[p,h]=(0,a.useState)(""),g=(0,a.useMemo)(()=>u&&p?i.filter(e=>{let{name:t}=e;return t.toLowerCase().includes(p.toLowerCase())}):i,[i,p,u]);return(0,r.jsxs)(b,{...x,children:[(0,r.jsx)(y.A,{required:l,requiredStyle:s,showOptionalLabel:d,children:t}),(0,r.jsx)(b.Button,{children:e=>{let{selected:t,isExpanded:l}=e;return u&&l?(0,r.jsx)(C.A,{unStyled:!0,focusOnMount:!0,onClick:e=>e.stopPropagation(),onKeyDown:e=>" "===e.key&&e.stopPropagation(),value:p,onChange:e=>h(e.target.value)}):(null==t?void 0:t.map(e=>{var t;return null===(t=i.find(t=>t.value===e.value))||void 0===t?void 0:t.name}).join(", "))||c}}),(0,r.jsxs)(b.Options,{className:(0,o.p)({"bottom-12 shadow-500-reverse":m}),children:[u&&0===g.length&&(0,r.jsx)("p",{className:"px-3 py-2 text-14 text-gray-500",children:v("common.no.results.found")}),g.map(e=>{let{name:t,value:l}=e;return(0,r.jsx)(b.Option,{value:l,children:t},l)})]})]})}},21532:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>_});var r=l(95155),a=l(12115),n=l(11802),o=l(55195),s=l(60410),d=l(26077),i=l(44969),c=l(77296),u=l(35358),m=l(83496),x=l(66382),v=l(71577),p=l(2487),h=l(5741),g=l(26505),f=l(89344);l(16871),l(52111);var j=l(2355),b=l(92236),y=l(22471),C=l(77089);let N=e=>{let{displayMonth:t}=e,{goToMonth:l,goToDate:n,nextMonth:o,previousMonth:s}=(0,f.cq)(),{fromYear:d,toYear:i}=(0,f.wj)(),c=(0,a.useCallback)(()=>{let e=null!=d?d:new Date().getFullYear()-5;return Array.from({length:i?i-e:10},(l,r)=>{let a=(e+r).toString();return{name:"".concat((0,C.A)(t,"MMMM")," ").concat(a),value:a}})},[t,d,i]);return(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(j.A,{defaultValue:t.getFullYear().toString(),options:c(),onChange:e=>{n(new Date(parseInt(e,10),t.getMonth(),1))}}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(x.default,{variant:"ghost",size:"fit",onClick:()=>s&&l(s),children:(0,r.jsx)(b.A,{className:"size-5"})}),(0,r.jsx)(x.default,{variant:"ghost",size:"fit",onClick:()=>o&&l(o),children:(0,r.jsx)(y.A,{className:"size-5"})})]})]})},w=e=>{let{fromYear:t,toYear:l,...a}=e;return(0,r.jsx)(f.qZ,{initialProps:{fromYear:t,toYear:l},children:(0,r.jsx)(f.i9,{children:(0,r.jsx)(f.hv,{...a,components:{Caption:N}})})})},A=e=>{var t;let{orders:l,sortOptions:a,filters:n,onSortBy:o,onSearch:d,onClearRefinements:i,statusOptions:f,onStatusRefine:j,onCreationDateRefine:b}=e,{translate:y}=(0,s.A)(),{isOpen:C,onOpen:N,onClose:A}=(0,c.A)(),{isOpen:k,onClose:S,onToggle:F}=(0,c.A)(),D=[{title:"product.sortBy",Component:(0,r.jsx)("div",{className:"flex flex-col gap-7",children:(null!=a?a:[]).map(e=>{let{name:t,value:l}=e;return(0,r.jsx)(p.A,{label:t,checked:l===(null==n?void 0:n.sort),onSelected:()=>null==o?void 0:o(l)},l)})})},{title:"dashboard.quote.search",Component:(0,r.jsx)(h.A,{searchValue:null!==(t=null==n?void 0:n.search)&&void 0!==t?t:"",variant:"sm",placeholder:"".concat(y("dashboard.search.for.orders"),"..."),handleOnChange:e=>null==d?void 0:d(e)})},{title:"dashboard.order.status",Component:(0,r.jsx)("div",{className:"flex flex-col gap-7",children:(null!=f?f:[]).map(e=>{var t;let{name:l,value:a}=e;return(0,r.jsx)(g.A,{label:l,checked:null==n?void 0:null===(t=n.status)||void 0===t?void 0:t.includes(a),onChecked:e=>{var t,l,r;return null==j?void 0:j(e?[...null!==(l=null==n?void 0:n.status)&&void 0!==l?l:[],a]:null!==(r=null==n?void 0:null===(t=n.status)||void 0===t?void 0:t.filter(e=>e!==a))&&void 0!==r?r:[])}},a)})})},{title:"dashboard.creation.date",Component:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{onClick:F,className:"rounded-md border border-gray-300 px-3 py-2 text-14 text-gray-600",children:(null==n?void 0:n.createdFrom)||(null==n?void 0:n.createdTo)?"".concat(n.createdFrom?new Date(n.createdFrom).toLocaleDateString():""," : ").concat(n.createdTo?new Date(n.createdTo).toLocaleDateString():""):"dd/mm/yy"}),k&&(0,r.jsxs)("div",{children:[(0,r.jsx)(w,{mode:"range",selected:{from:(null==n?void 0:n.createdFrom)?new Date(null==n?void 0:n.createdFrom):void 0,to:(null==n?void 0:n.createdTo)?new Date(null==n?void 0:n.createdTo):void 0},onSelect:e=>null==b?void 0:b({from:null==e?void 0:e.from,to:null==e?void 0:e.to})}),(0,r.jsxs)("div",{className:"mt-2 flex items-center justify-end gap-8 pr-8",children:[(0,r.jsx)("span",{className:"text-14 font-medium uppercase text-primary",onClick:S,children:y("common.cancel")}),(0,r.jsx)("span",{className:"text-14 font-medium uppercase text-primary",onClick:()=>{S()},children:y("common.save")})]})]})]})}];return(0,r.jsxs)("div",{className:"lg:hidden",children:[(0,r.jsxs)("button",{className:"flex w-full cursor-pointer items-center justify-center gap-2 rounded-md border border-gray-300 p-2 text-14 text-gray-600 transition hover:bg-gray-50 md:w-fit md:grow-0",onClick:N,children:[(0,r.jsx)("span",{children:y("product.sortAndFilter")}),(0,r.jsx)(u.A,{width:20})]}),(0,r.jsx)(m.A,{isOpen:C,onClose:A,direction:"left",headline:y("product.sortAndFilter"),className:"h-screen w-[90vw] max-w-[350px]",headerClassName:"border-y border-neutral-400",children:(0,r.jsxs)("div",{className:"flex h-full flex-col",children:[(0,r.jsx)("div",{className:"grow overflow-y-auto px-4 lg:px-5",children:D.map((e,t)=>{let{title:l,Component:a}=e;return(0,r.jsx)("div",{className:"border-b border-neutral-400",children:(0,r.jsxs)(v.A,{className:"border-none",children:[(0,r.jsx)(v.A.Button,{className:"py-5",defaultSpacing:!1,children:(0,r.jsx)("span",{className:"text-14 font-bold",children:y(l)})}),(0,r.jsx)(v.A.Panel,{defaultSpacing:!1,className:"pb-6",children:a})]})},t)})}),(0,r.jsxs)("div",{className:"flex items-center gap-3 border-t border-neutral-400 p-4 lg:p-5",children:[(0,r.jsx)(x.default,{variant:"secondary",className:"flex-1",onClick:()=>{null==i||i(),A()},children:y("product.clear.all")}),(0,r.jsxs)(x.default,{variant:"primary",className:"flex-1",onClick:A,children:[y("common.view")," (",null==l?void 0:l.length,")"]})]})]})})]})};var k=l(85763),S=l(39164);let F=e=>{var t;let{filters:l,onSearch:a,statusOptions:n,onStatusRefine:o,onCreationDateRefine:d}=e,{translate:i}=(0,s.A)(),c=[{title:"orders.label",Component:(0,r.jsx)(h.A,{containerClassName:"h-[38px] w-[360px]",searchValue:null!==(t=null==l?void 0:l.search)&&void 0!==t?t:"",variant:"xs",placeholder:"".concat(i("dashboard.search.for.orders"),"..."),handleOnChange:e=>null==a?void 0:a(e)})},{title:"common.status",Component:(0,r.jsx)(S.A,{className:"min-w-[200px]",value:null==l?void 0:l.status,options:(null!=n?n:[]).map(e=>{let{name:t,value:l}=e;return{name:t,value:l}}),onChange:o})},{title:"dashboard.creation.date",Component:(0,r.jsxs)(k.A,{size:"lg",className:"w-[200px]",children:[(0,r.jsx)(k.A.Button,{children:i("common.select")}),(0,r.jsx)(k.A.Options,{className:"max-h-[unset] w-max",children:(0,r.jsx)(w,{mode:"range",selected:{from:(null==l?void 0:l.createdFrom)?new Date(null==l?void 0:l.createdFrom):void 0,to:(null==l?void 0:l.createdTo)?new Date(null==l?void 0:l.createdTo):void 0},onSelect:e=>null==d?void 0:d({from:null==e?void 0:e.from,to:null==e?void 0:e.to})})})]})}];return(0,r.jsx)("div",{className:"hidden gap-3 lg:flex",children:c.map((e,t)=>{let{title:l,Component:a}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-14 text-gray-700",children:i(l)}),(0,r.jsx)("div",{className:"mt-2",children:a})]},t)})})};var D=l(96515),O=l(4450);let T=e=>{var t;let{filters:l,onClearRefinements:n,onStatusRefine:o,onCreationDateRefine:d}=e,{translate:i}=(0,s.A)(),c=(0,a.useMemo)(()=>{var e;let t=[];return l&&((null===(e=l.status)||void 0===e?void 0:e.length)&&t.push(...l.status.map(e=>({name:i("orders.status.".concat(e.toLowerCase())),onRefine:()=>{var t,r;return null==o?void 0:o(null!==(r=null===(t=l.status)||void 0===t?void 0:t.filter(t=>t!==e))&&void 0!==r?r:[])}}))),(l.createdFrom||l.createdTo)&&t.push({name:"".concat(l.createdFrom?new Date(l.createdFrom).toLocaleDateString():""," : ").concat(l.createdTo?new Date(l.createdTo).toLocaleDateString():""),onRefine:()=>null==d?void 0:d({from:void 0,to:void 0})})),t},[l,o,d,i]);return(null==l?void 0:null===(t=l.status)||void 0===t?void 0:t.length)||(null==l?void 0:l.createdFrom)||(null==l?void 0:l.createdTo)?(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,r.jsx)("div",{className:"cursor-pointer rounded-md border border-gray-300 px-2 py-[6px] text-14 leading-[20px] text-gray-700",onClick:n,children:i("dashboard.clear.all")}),c.map(e=>{let{name:t,onRefine:l}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-2 rounded-md border border-neutral-200 bg-neutral-200 px-2 py-[6px] text-14 leading-[20px] text-gray-700",children:[(0,r.jsx)("span",{children:t}),(0,r.jsx)(O.A,{className:"cursor-pointer text-gray-700",width:16,height:16,onClick:l})]},t)})]})}):(0,r.jsx)(r.Fragment,{})},M=e=>{let{orders:t,loading:l,onClearRefinements:n,onStatusRefine:o,onCreationDateRefine:c,onSearch:u,sortOptions:m,onSortBy:x,filters:v,statusOptions:p,totalItems:h,page:g,onPageChange:f,onRowsPerPageChange:j,limit:b}=e,{translate:y}=(0,s.A)(),C={orders:t,onClearRefinements:n,onSearch:u,onStatusRefine:o,onCreationDateRefine:c,sortOptions:m,onSortBy:x,filters:v,statusOptions:p},N=(0,a.useCallback)(()=>{null==f||f(g+1)},[g,f]),w=(0,a.useCallback)(()=>{null==f||f(g-1)},[g,f]);return(0,r.jsxs)("div",{className:"pb-12",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 py-6 md:py-7 lg:py-9",children:[(0,r.jsx)("h1",{className:"text-18 font-extrabold text-gray-800 md:text-20 lg:text-24",children:y("common.orders")}),t.length>0&&(0,r.jsx)("div",{className:"rounded-md bg-primary px-[6px] py-[2px] text-12 font-semibold text-white",children:t.length})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-y-5 overflow-visible lg:gap-y-8",children:[(0,r.jsx)(A,{...C}),(0,r.jsx)(F,{...C}),(0,r.jsx)(T,{onClearRefinements:n,filters:v,onSearch:u,onStatusRefine:o,onCreationDateRefine:c}),(0,r.jsxs)("div",{children:[(0,r.jsx)(D.A,{orders:t,pagination:l?void 0:{totalItems:h,page:g,limit:b,onNext:N,onPrevious:w,onRowsPerPageChange:j}}),0===t.length&&(l?(0,r.jsx)("div",{className:"flex w-full justify-center border-x border-b border-neutral-400 py-8",children:(0,r.jsx)(i.A,{svgWidth:20,svgHeight:20,className:"fill-gray-700"})}):(0,r.jsx)(d.A,{header:y("common.no.results.found")}))]})]})]})};var L=l(60798),P=l(57076),z=l(66358),R=l(37892),B=l(47240),W=l(22470);let q=()=>{let[e,t]=(0,a.useState)(25),[l,r]=(0,a.useState)("offset:0"),[n,o]=(0,a.useState)([]),[s,d]=(0,a.useState)(""),[i,c]=(0,a.useState)({from:void 0,to:void 0}),u=(0,W.d)(s),m=Math.floor(+l.split(":")[1]/e)+1,x=(0,a.useCallback)(e=>{let[t,l,r]=[e.getDate().toString().padStart(2,"0"),(e.getMonth()+1).toString().padStart(2,"0"),e.getFullYear()];return"".concat(r,"-").concat(l,"-").concat(t)},[]),v=(0,a.useMemo)(()=>{let e={};return i.from&&(e.from="".concat(x(i.from),"T00:00:00.000Z")),i.to&&(e.to="".concat(x(i.to),"T23:59:59.999Z")),e},[i,x]),p=(0,a.useCallback)(()=>{t(25),o([]),d(""),c({from:void 0,to:void 0})},[]);return{limit:e,page:m,setLimit:t,cursor:l,setCursor:r,states:n,setStates:o,search:s,debouncedSearch:u,setSearch:d,date:i,ISODate:v,onCreationDateRefine:c,clearRefinements:p}},V=()=>{let{translate:e}=(0,s.A)();return{orderStatusOptions:[{name:"Pending",value:"Open"},{name:"Confirmed",value:"Confirmed"},{name:"Delivered",value:"Complete"},{name:"Returned",value:"Cancelled"}].map(t=>{let{name:l,value:r}=t;return{name:e("orders.status.".concat(l.toLowerCase())),value:r}})}},_=()=>{var e,t,l,a;let{account:s}=(0,L.A)(),{page:d,limit:i,setLimit:c,cursor:u,setCursor:m,clearRefinements:x,states:v,setStates:p,search:h,debouncedSearch:g,setSearch:f,date:j,ISODate:b,onCreationDateRefine:y}=q(),{businessUnits:C}=(0,B.A)(),{selectedBusinessUnit:N}=(0,R.rW)(),{orders:w,isLoading:A}=(0,P.A)({limit:i,cursor:u,...v.length?{states:v}:{},...g?{ids:[g.trim()]}:{},createdFrom:b.from,createdTo:b.to,businessUnitKey:null==N?void 0:N.key,sortAttributes:[{createdAt:"desc"}]}),k=null===(e=w.items)||void 0===e?void 0:e.map(e=>(0,z.x)(e,{businessUnits:C})),S=w.previousCursor,F=w.nextCursor,D=null!==(a=w.total)&&void 0!==a?a:0,{orderStatusOptions:O}=V();return(0,r.jsx)(n.A,{href:o.s.orders,userName:null==s?void 0:s.firstName,children:(0,r.jsx)(M,{orders:null!=k?k:[],loading:A,filters:{search:h,status:v,createdFrom:null===(t=j.from)||void 0===t?void 0:t.toString(),createdTo:null===(l=j.to)||void 0===l?void 0:l.toString()},sortOptions:[],statusOptions:O,onSearch:e=>f(e),onStatusRefine:p,onClearRefinements:x,onCreationDateRefine:y,page:d,totalItems:D,limit:i,onPageChange:e=>{let t=e>d;t&&F?m(F):!t&&S&&m(S)},onRowsPerPageChange:e=>c(+e)})})}},52111:()=>{}}]);
//# sourceMappingURL=1532.3bcec30d6e499cfa.js.map