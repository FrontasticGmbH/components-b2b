"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[379],{40379:(e,s,d)=>{d.r(s),d.d(s,{default:()=>f});var n=d(95155),t=d(12115),a=d(11802),l=d(55195),r=d(60410),i=d(91938),o=d(41287),u=d(87405);let c=e=>{let{addresses:s,loading:d,onDeleteAddress:t,onSearchAddresses:a,viewOnly:l}=e,{translate:c}=(0,r.A)();return(0,n.jsxs)("div",{children:[l&&(0,n.jsxs)(i.A,{className:"mt-3",children:[(0,n.jsx)("b",{children:c("common.view.only")})," ",c("dashboard.addresses.view.only.desc")]}),(0,n.jsx)("h1",{className:"py-6 text-18 font-extrabold text-gray-800 md:py-7 md:text-20 lg:py-9 lg:text-24",children:c("common.addresses")}),(0,n.jsx)(o.A,{translations:{button:c("dashboard.address.add")},buttonLink:"?subPath=add-address",buttonDisabled:l,onSearchChange:a,isEmpty:!s.length,isLoading:d,entity:c("common.addresses"),children:(0,n.jsx)(u.A,{onDeleteAddress:t,addresses:s})})]})};var y=d(60798),m=d(56518),v=d(37892),A=d(47240),h=d(38917),b=d(66493),p=d(36957),k=d(76046),x=d(76835);let j=e=>{let s=(0,k.useSearchParams)().get("subPath"),d=(0,t.useMemo)(()=>{let d={"add-address":{title:"dashboard.address.add",Component:(0,n.jsx)(x.A,{...{...e,addresses:e.addresses,onAddAddress:e.onAddAddress}})},"edit-address":{title:"dashboard.address.edit",Component:(0,n.jsx)(x.A,{...{...e,addresses:e.addresses,onUpdateAddress:e.onUpdateAddress}})}};if(s&&Object.keys(d).includes(s))return d[s]},[s,e]);return{subPath:s,ActiveSubPath:d}},U=e=>{let{addresses:s}=e,[d,n]=(0,t.useState)({addresses:""}),a=(0,t.useCallback)(e=>s=>n({...d,[e]:s}),[d]),l=(e,s)=>{let{firstName:d,lastName:n,streetName:t,streetNumber:a,city:l,country:r,state:i}=e;return[d,n,t,a,l,r,i].some(e=>e&&e.includes(s))};return{searchedAddresses:s.filter(e=>l(e,d.addresses)),handleSearch:a}},f=()=>{var e,s,d,t;let{projectSettings:r}=(0,b.A)(),{account:i,isLoading:o}=(0,y.A)(),{selectedBusinessUnit:u}=(0,v.rW)(),{addAddress:k,removeAddress:x,updateAddress:f,businessUnits:g}=(0,A.A)(),{searchedAddresses:w,handleSearch:C}=U({addresses:(null!==(s=null===(e=g.find(e=>e.key===(null==u?void 0:u.key)))||void 0===e?void 0:e.addresses)&&void 0!==s?s:[]).map(m.v)}),{permissions:N}=(0,h.A)(null==u?void 0:u.key),D=!N.UpdateBusinessUnitDetails,S={addresses:w,loading:o||!(null==u?void 0:u.key),onSearchAddresses:C("addresses"),viewOnly:D,onAddAddress:async e=>null!=u&&!!u.key&&!!(await k({...(0,m.l)(e),businessUnitKey:null==u?void 0:u.key})).businessUnitId,onUpdateAddress:async e=>null!=u&&!!u.key&&!!(await f({...(0,m.l)(e),businessUnitKey:null==u?void 0:u.key})).businessUnitId,onDeleteAddress:async e=>null!=u&&!!u.key&&!!(await x({addressId:e,businessUnitKey:null==u?void 0:u.key})).businessUnitId,countryOptions:(null!==(d=null==r?void 0:r.countries)&&void 0!==d?d:[]).map(p.D).map(e=>{let{name:s,code:d,states:n}=e;return{name:s,value:d,states:n.map(e=>{let{name:s,code:d}=e;return{name:s,value:d}})}})},{ActiveSubPath:_}=j(S);return(0,n.jsx)(a.A,{title:null==_?void 0:_.title,href:l.s.addresses,userName:null==i?void 0:i.firstName,children:null!==(t=null==_?void 0:_.Component)&&void 0!==t?t:(0,n.jsx)(c,{...S})})}}}]);
//# sourceMappingURL=379.0922dbfee10f104d.js.map