"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5230],{45273:(e,l,t)=>{t.d(l,{A:()=>i});var r=t(95155),a=t(12115),s=t(72568),o=t(31586),n=t(47234);let i=e=>{let{children:l,content:t,icon:i,place:d="right",style:c={},iconWidth:u=20,iconHeight:p=20,className:m="",...v}=e,x=(0,a.useId)(),h=null!=i?i:s.A;return(0,r.jsxs)("div",{className:(0,n.p)("flex items-center gap-2",m),children:[l,(0,r.jsx)(h,{width:u,height:p,"data-tooltip-id":x,"data-tooltip-content":t}),(0,r.jsx)(o.m_,{id:x,place:d,style:{zIndex:10,maxWidth:230,...c},...v})]})}},81877:(e,l,t)=>{t.d(l,{A:()=>n});var r=t(12115),a=t(69402),s=t(1862),o=t(13596);let n=e=>{var l,t,n;let{businessUnitKey:i,filters:{searchQuery:d,status:c,cursor:u}={}}=e,{data:p,...m}=(0,a.Ay)(i?["/action/business-unit/queryApprovalFlows",i,d,c]:null,()=>o.x.composableCommerce.businessUnit.queryApprovalFlows({businessUnitKey:i,approvalFlowIds:[...d?[d]:[]],approvalFlowStatus:[...c?[c]:[]],cursor:u,sortAttributes:[{createdAt:"desc"}]})),v=!i||m.isLoading,{mutate:x}=(0,s.iX)(),h=(0,r.useCallback)(()=>{x(e=>"object"==typeof e&&(null==e?void 0:e[0].startsWith("/action/business-unit/queryApprovalFlows")),void 0,{revalidate:!0})},[x]),b=(null==p?void 0:p.isError)?[]:null!==(t=null==p?void 0:null===(l=p.data)||void 0===l?void 0:l.items)&&void 0!==t?t:[],f=(null==p?void 0:p.isError)?0:null!==(n=null==p?void 0:p.data.total)&&void 0!==n?n:0,[g,w]=(null==p?void 0:p.isError)?[void 0,void 0]:[null==p?void 0:p.data.previousCursor,null==p?void 0:p.data.nextCursor];return{approvalFlows:b,isLoading:v,totalItems:f,previousCursor:g,nextCursor:w,approveApprovalFlow:(0,r.useCallback)(async e=>{if(!i)return;let l=await o.x.composableCommerce.businessUnit.approveApprovalFlow({approvalFlowId:e},{approvalFlowId:e});return(null==l?void 0:l.isError)||!l.data.approvalFlowId||h(),l.isError?null:l.data},[i,h]),rejectApprovalFlow:(0,r.useCallback)(async(e,l)=>{if(!i)return;let t=await o.x.composableCommerce.businessUnit.rejectApprovalFlow({approvalFlowId:e,reason:null!=l?l:""},{approvalFlowId:e,reason:null!=l?l:""});return(null==t?void 0:t.isError)||!t.data.approvalFlowId||h(),t.isError?null:t.data},[i,h]),mutateAll:h}}},73351:(e,l,t)=>{t.r(l),t.d(l,{default:()=>k});var r=t(95155),a=t(11802),s=t(12115),o=t(1547);let n=e=>{let{icon:l,title:t,summary:a}=e,o=(0,s.useCallback)(()=>{var e;return s.isValidElement(l)?s.cloneElement(l,{...l.props,className:"".concat(null!==(e=l.props.className)&&void 0!==e?e:""," w-full h-full")}):l},[l]);return(0,r.jsxs)("div",{className:"flex w-full items-center gap-4 rounded-md border border-neutral-400 px-5 py-6 md:gap-5",children:[(0,r.jsx)("div",{className:"box-content rounded-full bg-neutral-300 p-5",children:(0,r.jsx)("span",{className:"block size-[20px] text-primary md:size-[24px] lg:size-[28px]",children:o()})}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("h5",{className:"text-14 font-semibold leading-normal text-gray-700",children:t}),(0,r.jsx)("p",{className:"text-14 leading-loose text-gray-600",children:a})]})]})};var i=t(45273),d=t(26077),c=t(21029),u=t(39275),p=t(60410),m=t(91938),v=t(27638),x=t(96515),h=t(55195);let b=e=>{let{orders:l,hasPendingApprovalFlows:t}=e,{translate:a}=(0,p.A)(),{cardItems:b}=(0,v.A)(),[f,g]=(0,s.useState)({}),{ref:w}=(0,u.A)(()=>g({}));return(0,r.jsxs)("div",{className:"flex flex-col",children:[t&&(0,r.jsxs)(m.A,{variant:"warning",className:"mt-3",children:[a("dashboard.approval.flows.approve.ask")," ",(0,r.jsx)(o.default,{href:h.s.approvalFlows,className:"underline",children:a("dashboard.approval.flows.section").toLowerCase()})]}),(0,r.jsx)("h1",{className:"py-6 text-18 font-extrabold text-gray-800 md:py-7 md:text-20 lg:py-9 lg:text-24",children:a("common.dashboard")}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3",ref:w,children:b.map(e=>{let{icon:l,name:t,summary:a,href:s,disabled:d,disabledMessage:u,order:p}=e;return(0,r.jsxs)("div",{className:"relative",style:{order:p},onClick:()=>g({[s]:!0}),children:[(0,r.jsx)(o.default,{href:s,className:"block w-full ".concat(d?"opacity-50":""),underlineOnHover:!1,...d?{onClick:e=>e.preventDefault()}:{},children:(0,r.jsx)(n,{icon:l,title:t,summary:a})}),d&&(0,r.jsx)(i.A,{isOpen:!!f[s],setIsOpen:e=>g({...f,[s]:e}),icon:c.A,className:"absolute right-3 top-3",content:u})]},s)})}),(0,r.jsxs)("div",{className:"mt-7 md:mt-9 lg:mt-11",children:[(0,r.jsx)("h2",{className:"mb-4 text-16 font-extrabold text-gray-800 md:mb-5 md:text-18 lg:mb-6 lg:text-20",children:a("common.orders.latest")}),l&&l.length>0?(0,r.jsx)(x.A,{orders:l}):(0,r.jsx)(d.A,{header:a("common.no.results.found")})]})]})};var f=t(60798),g=t(57076),w=t(37892),j=t(66358),A=t(47240),y=t(81877);let k=()=>{var e;let{account:l}=(0,f.A)(),{businessUnits:t}=(0,A.A)(),{selectedBusinessUnit:s}=(0,w.rW)(),{approvalFlows:o}=(0,y.A)({businessUnitKey:null==s?void 0:s.key,filters:{status:"Pending"}}),{orders:n}=(0,g.A)({limit:5,businessUnitKey:null==s?void 0:s.key,sortAttributes:[{createdAt:"desc"}]});return(0,r.jsx)(a.A,{href:h.s.dashboard,userName:null==l?void 0:l.firstName,children:(0,r.jsx)(b,{orders:(null!==(e=n.items)&&void 0!==e?e:[]).map(e=>(0,j.x)(e,{businessUnits:t})),hasPendingApprovalFlows:o.length>0})})}},60600:(e,l,t)=>{t.d(l,{A:()=>a});var r=t(12115);let a=r.forwardRef(function(e,l){let{title:t,titleId:a,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":a},s),t?r.createElement("title",{id:a},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"}))})},21029:(e,l,t)=>{t.d(l,{A:()=>a});var r=t(12115);let a=r.forwardRef(function(e,l){let{title:t,titleId:a,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":a},s),t?r.createElement("title",{id:a},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))})}}]);
//# sourceMappingURL=5230.e5c9c96f88a6c66e.js.map