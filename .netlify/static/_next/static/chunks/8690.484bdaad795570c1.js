"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8690],{45273:(e,a,s)=>{s.d(a,{A:()=>d});var l=s(95155),n=s(12115),r=s(72568),t=s(31586),o=s(47234);let d=e=>{let{children:a,content:s,icon:d,place:i="right",style:c={},iconWidth:m=20,iconHeight:u=20,className:p="",...x}=e,h=(0,n.useId)(),v=null!=d?d:r.A;return(0,l.jsxs)("div",{className:(0,o.p)("flex items-center gap-2",p),children:[a,(0,l.jsx)(v,{width:m,height:u,"data-tooltip-id":h,"data-tooltip-content":s}),(0,l.jsx)(t.m_,{id:h,place:i,style:{zIndex:10,maxWidth:230,...c},...x})]})}},19387:(e,a,s)=>{s.d(a,{A:()=>i});var l=s(95155),n=s(12115),r=s(66382),t=s(99354),o=s(15033),d=s(27251);let i=e=>{let{children:a,translations:s,onCancel:i,onConfirm:c,isOpen:m,disabled:u=!1,className:p=""}=e,[x,h]=(0,o.A)(m,!1),v=(0,n.useCallback)(()=>h(!0),[h]),b=(0,n.useCallback)(()=>h(!1),[h]),[w,g]=(0,n.useState)(!1),{blockScroll:f}=(0,t.A)();(0,n.useEffect)(()=>(f(x),()=>f(!1)),[x,f]);let j=(0,n.useCallback)(()=>{null==i||i(),b()},[i,b]),y=(0,n.useCallback)(async()=>{g(!0),await (null==c?void 0:c()),g(!1),b()},[c,b]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:p,onClick:v,children:a}),(0,l.jsxs)(d.A,{className:"lg:max-w-[400px]",isOpen:x,onRequestClose:j,closeButton:!0,children:[(0,l.jsxs)("div",{className:"px-6",children:[(0,l.jsx)("h4",{className:"pb-4 pt-6 text-20 font-semibold text-gray-800",children:s.title}),(0,l.jsx)("p",{className:"text-14 text-gray-700",children:s.summary})]}),(0,l.jsxs)("div",{className:"mt-5 flex items-center justify-end gap-3 border-t border-neutral-400 p-6",children:[(0,l.jsx)(r.default,{variant:"secondary",size:"m",className:"min-w-[112px]",onClick:j,children:s.cancel}),!u&&(0,l.jsx)(r.default,{variant:"warning",size:"m",className:"min-w-[112px]",onClick:y,loading:w,children:s.confirm})]})]})]})}},90942:(e,a,s)=>{s.d(a,{A:()=>o});var l=s(95155),n=s(12115),r=s(66382),t=s(47234);let o=e=>{let{children:a,translations:s,onCancel:o,onSubmit:d,unstyled:i=!1,classNames:c={},showCancelButton:m=!0,showSubmitButton:u=!0}=e,[p,x]=(0,n.useState)(!1),h=(0,n.useCallback)(async e=>{e.preventDefault(),x(!0),await (null==d?void 0:d()),x(!1)},[d]);return(0,l.jsxs)("form",{className:(0,t.p)({"rounded-md border-neutral-400 md:border md:p-5 md:pb-6":!i},c.form),onSubmit:h,children:[a,(0,l.jsxs)("div",{className:(0,t.p)("flex items-center gap-3",c.buttonsContainer,{"pt-8":u||m}),children:[m&&(0,l.jsx)(r.default,{variant:"secondary",size:"m",onClick:o,type:"button",className:"min-w-[112px]",children:s.cancel}),u&&(0,l.jsx)(r.default,{variant:"primary",size:"m",type:"submit",loading:p,className:"min-w-[112px]",children:s.submit})]})]})}},55195:(e,a,s)=>{s.d(a,{s:()=>l});let l={dashboard:"/dashboard",companyAdmin:"/company-admin",shoppingLists:"/purchase-lists",addresses:"/addresses",quotes:"/quotes",orders:"/orders",settings:"/settings",approvalRules:"/approval-rules",approvalFlows:"/approval-flows",shoppingListDetail:e=>"/purchase-list/".concat(e.replace(/\s+/g,"-")),quoteDetail:e=>"/quote/".concat(e.replace(/\s+/g,"-")),quoteRequestDetail:e=>"/quote-request/".concat(e.replace(/\s+/g,"-")),orderDetail:e=>"/order/".concat(e.replace(/\s+/g,"-")),approvalRuleDetail:e=>"/approval-rule/".concat(e.replace(/\s+/g,"-")),approvalFlowDetail:e=>"/approval-flow/".concat(e.replace(/\s+/g,"-"))}},27638:(e,a,s)=>{s.d(a,{A:()=>v});var l=s(95155),n=s(14038),r=s(8517),t=s(60410),o=s(96318),d=s(28039),i=s(36220),c=s(49765),m=s(71918),u=s(25975),p=s(18569),x=s(773),h=s(55195);let v=()=>{let{translate:e}=(0,t.A)(),[a]=(0,r.A)(n.L_),s={dashboard:{icon:(0,l.jsx)(l.Fragment,{}),name:e("common.dashboard"),summary:"",href:h.s.dashboard,disabled:!1,disabledMessage:"",order:1},orders:{icon:(0,l.jsx)(o.A,{}),name:e("common.orders"),summary:e("dashboard.orders.summary"),href:h.s.orders,disabled:!1,disabledMessage:"",order:2},quotes:{icon:(0,l.jsx)(d.A,{}),name:e("common.quotes"),summary:e("dashboard.quotes.summary"),href:h.s.quotes,disabled:!1,disabledMessage:"",order:3},companyAdmin:{icon:(0,l.jsx)(i.A,{}),name:e("common.company.admin"),summary:e("dashboard.company.admin.summary"),href:h.s.companyAdmin,disabled:!a,disabledMessage:e("dashboard.company.admin.disabled.on.small.screens"),order:a?4:999},purchaseLists:{icon:(0,l.jsx)(c.A,{}),name:e("common.purchase.lists"),summary:e("dashboard.purchase.lists.summary"),href:h.s.shoppingLists,disabled:!1,disabledMessage:"",order:5},approvalRules:{icon:(0,l.jsx)(m.A,{}),name:e("common.approval.rules"),summary:e("dashboard.approval.rules.summary"),href:h.s.approvalRules,disabled:!a,disabledMessage:e("dashboard.approval.rules.disabled.on.small.screen"),order:a?6:999},approvalFlows:{icon:(0,l.jsx)(u.A,{}),name:e("common.approval.flows"),summary:e("dashboard.approval.flows.summary"),href:h.s.approvalFlows,disabled:!1,disabledMessage:"",order:7},settings:{icon:(0,l.jsx)(p.A,{}),name:e("common.settings"),summary:e("dashboard.settings.summary"),href:h.s.settings,disabled:!1,disabledMessage:"",order:8},addresses:{icon:(0,l.jsx)(x.A,{}),name:e("common.addresses"),summary:e("dashboard.addresses.summary"),href:h.s.addresses,disabled:!1,disabledMessage:"",order:9}};return{sidebarItems:[s.dashboard,s.orders,s.quotes,s.companyAdmin,s.purchaseLists,s.approvalRules,s.approvalFlows,s.settings,s.addresses],cardItems:[s.orders,s.quotes,s.companyAdmin,s.purchaseLists,s.approvalRules,s.approvalFlows,s.settings,s.addresses]}}},11802:(e,a,s)=>{s.d(a,{A:()=>i});var l=s(95155);s(12115);var n=s(47234),r=s(1547);let t=e=>{let{title:a,links:s=[]}=e;return(0,l.jsxs)("div",{className:"h-full w-fit bg-gray-100 px-7 py-10",children:[(0,l.jsx)("h6",{className:"px-5 text-12 font-medium uppercase text-gray-500",children:a}),(0,l.jsx)("div",{className:"mt-4 flex flex-col items-start gap-4",children:s.map(e=>{let{name:a,href:s,openInNewTab:t,isActive:o}=e;return(0,l.jsx)(r.default,{className:(0,n.p)("w-full rounded-lg px-5 py-2 text-14 font-medium text-gray-600 hover:bg-neutral-300",{"bg-neutral-300":o}),href:null!=s?s:"#",openInNewTab:t,underlineOnHover:!1,children:a},s)})})]})};var o=s(60410),d=s(27638);let i=e=>{let{title:a,href:s,children:n,userName:r}=e,{translate:i}=(0,o.A)(),{sidebarItems:c}=(0,d.A)();return(0,l.jsxs)("div",{className:"relative flex items-start gap-6 2xl:min-h-[calc(100vh-123px)]",children:[(0,l.jsx)("div",{className:"sticky top-[112px] hidden h-[calc(100vh-112px)] w-max shrink-0 2xl:block",children:(0,l.jsx)(t,{title:i("common.say.hi",{values:{name:null!=r?r:""}}),links:c.map(e=>({...e,isActive:s===e.href}))})}),(0,l.jsxs)("div",{className:"box-border min-h-[calc(100vh-131px)] max-w-full grow px-4 pb-6 md:px-5 md:pb-7 lg:min-h-[calc(100vh-83px)] lg:px-12 lg:pb-9 2xl:min-h-[unset]",children:[a&&(0,l.jsx)("h1",{className:"py-6 text-18 font-extrabold text-gray-800 md:py-7 md:text-20 lg:py-9 lg:text-24",children:i(a)}),n]})]})}},17180:(e,a,s)=>{s.d(a,{A:()=>t});var l=s(12115),n=s(13596),r=s(69402);let t=()=>{var e,a,s;let t=(0,l.useCallback)(()=>n.x.composableCommerce.businessUnit.getAssociateRoles(),[]),o=(0,r.Ay)("/action/buinsess-unit/getAssociateRoles",t);return{...o,data:(null===(e=o.data)||void 0===e?void 0:e.isError)?[]:null!==(s=null===(a=o.data)||void 0===a?void 0:a.data)&&void 0!==s?s:[]}}},28690:(e,a,s)=>{s.r(a),s.d(a,{default:()=>M});var l=s(95155),n=s(12115),r=s(11802),t=s(60410),o=s(3762),d=s(1547),i=s(71577),c=s(45273);let m=()=>{let[e,a]=(0,n.useState)({newsletterPref:!1,passwordChange:!1,deleteAccount:!1}),s=(0,n.useCallback)((s,l)=>{a({...e,[s]:l})},[e]);return{accordionExpanded:e,expandAccordion:(0,n.useCallback)(e=>{s(e,!0)},[s]),collapseAccordion:(0,n.useCallback)(e=>{s(e,!1)},[s])}};var u=s(66382),p=s(28187);let x=e=>{let{onCancel:a,onChangePassword:s}=e,{translate:r}=(0,t.A)(),[o,d]=(0,n.useState)({oldPassword:"",newPassword:"",confirmedNewPassword:""}),[i,c]=(0,n.useState)(""),[m,x]=(0,n.useState)(!1),h=(0,n.useCallback)(e=>{"newPassword"===e.target.name&&i&&c(""),d({...o,[e.target.name]:e.target.value})},[o,i]),v=(0,n.useCallback)(async e=>{e.preventDefault(),x(!0),await (null==s?void 0:s(o.oldPassword,o.newPassword)),d({oldPassword:"",newPassword:"",confirmedNewPassword:""}),x(!1)},[o.newPassword,o.oldPassword,s]),b=!o.oldPassword||!o.newPassword||!o.confirmedNewPassword||o.confirmedNewPassword!==o.newPassword;return(0,l.jsxs)("form",{onSubmit:v,children:[(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,l.jsx)(p.A,{containerClassName:"w-[370px]",name:"oldPassword",label:r("dashboard.current.password"),required:!0,value:o.oldPassword,onChange:h}),(0,l.jsx)(p.A,{containerClassName:"w-[370px]",name:"newPassword",label:r("dashboard.new.password"),required:!0,value:o.newPassword,error:i,onChange:h}),(0,l.jsx)(p.A,{containerClassName:"w-[370px]",name:"confirmedNewPassword",label:r("dashboard.confirm.password"),required:!0,value:o.confirmedNewPassword,onChange:h,error:o.newPassword&&o.confirmedNewPassword&&o.newPassword!==o.confirmedNewPassword?r("dashboard.password.not.match"):""})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3 pt-6",children:[(0,l.jsx)(u.default,{variant:"secondary",size:"m",onClick:a,type:"button",className:"min-w-[112px]",children:r("common.cancel")}),(0,l.jsx)(u.default,{variant:"primary",size:"m",type:"submit",disabled:b,loading:m,className:"min-w-[112px]",children:r("common.save")})]})]})};var h=s(66775),v=s(58617),b=s(19387),w=s(37892);let g=e=>{var a;let{onCancel:s,onDeleteAccount:r}=e,{translate:o}=(0,t.A)(),d=(0,h.A)(),[i,c]=(0,n.useState)({password:""}),[m,x]=(0,n.useState)(!1),[g,f]=(0,n.useState)(!1),{selectedBusinessUnit:j}=(0,w.rW)(),y=(null==j?void 0:null===(a=j.associates)||void 0===a?void 0:a.length)===1,N=(0,n.useCallback)(e=>{c({...i,[e.target.name]:e.target.value})},[i]),A=(0,n.useCallback)(async()=>{x(!0),!0===await (null==r?void 0:r(i.password))?d.push("/login"):v.A.error(o("dashboard.failed.to.delete.account"),{position:"top-right"}),x(!1)},[r,i,d,o]),C=!i.password;return(0,l.jsxs)("form",{children:[(0,l.jsx)("p",{className:"pb-4 text-14 text-gray-700",children:o("dashboard.cannot.regain.access")}),(0,l.jsx)(p.A,{containerClassName:"w-[370px]",name:"password",label:o("dashboard.password.confirmation"),required:!0,value:i.password,onChange:N}),(0,l.jsxs)("div",{className:"flex items-center gap-3 pt-6",children:[(0,l.jsx)(u.default,{variant:"secondary",size:"m",onClick:s,type:"button",className:"min-w-[112px]",children:o("common.cancel")}),(0,l.jsx)(b.A,{translations:{title:o("account.delete.account"),summary:o(y?"dashboard.associate.delete.disabled":"dashboard.cannot.regain.access"),cancel:o("common.cancel"),confirm:o("common.delete")},isOpen:g,onCancel:()=>f(!1),disabled:y,onConfirm:A,children:(0,l.jsx)(u.default,{variant:"warning",size:"m",type:"button",disabled:C,loading:m,onClick:()=>f(!0),className:"min-w-[112px]",children:o("common.delete")})})]})]})},f=e=>{var a;let{account:s,businessUnitOptions:n,onChangePassword:r,onDeleteAccount:u}=e,{translate:p}=(0,t.A)(),h=[{name:p("common.name"),value:"".concat(s.firstName," ").concat(s.lastName)},{name:p("common.email"),value:s.email}],v=[{name:p("common.business.unit"),value:null===(a=n.find(e=>e.value===s.businessUnit))||void 0===a?void 0:a.name},{name:p("common.role"),value:s.roles.join(", ")}],{accordionExpanded:b,expandAccordion:w,collapseAccordion:f}=m();return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"relative rounded-md border border-neutral-400 p-4 md:py-6",children:[(0,l.jsx)("div",{className:"flex flex-col gap-6",children:h.map((e,a)=>{let{name:s,value:n}=e;return(0,l.jsxs)("div",{className:"text-14 text-gray-700",children:[(0,l.jsx)("p",{className:"text-14 font-medium leading-normal",children:s}),(0,l.jsx)("span",{className:"mt-3 block text-14 leading-normal",children:n})]},a)})}),(0,l.jsx)(d.default,{"aria-label":p("account.personal.info.edit"),href:"?subPath=edit-personal-info",className:"absolute right-4 top-4",children:(0,l.jsx)(o.A,{width:20,height:20})})]}),(0,l.jsxs)("div",{className:"relative mt-4 rounded-md border border-neutral-400 p-4 md:mt-5 md:py-6",children:[(0,l.jsx)("div",{className:"flex flex-col gap-6",children:v.map((e,a)=>{let{name:s,value:n}=e;return(0,l.jsxs)("div",{className:"text-14 text-gray-700",children:[(0,l.jsx)("p",{className:"text-14 font-medium leading-normal",children:s}),(0,l.jsx)("span",{className:"mt-3 block text-14 leading-normal",children:n})]},a)})}),(0,l.jsx)(c.A,{content:p("dashboard.modification.prohibited"),className:"absolute right-4 top-4"})]}),(0,l.jsxs)("div",{className:"mt-7 md:mt-9 lg:mt-11",children:[(0,l.jsx)("h2",{className:"font-extrabold text-gray-800 md:text-18 lg:text-20",children:p("common.integrity")}),(0,l.jsxs)("div",{className:"mt-4 md:mt-5 lg:mt-6",children:[(0,l.jsxs)(i.A,{className:"rounded-b-none border-b-transparent",isExpanded:b.passwordChange,onExpand:()=>w("passwordChange"),onCollapse:()=>f("passwordChange"),children:[(0,l.jsx)(i.A.Button,{className:"text-14 font-medium leading-normal",children:p("dashboard.change.your.password")}),(0,l.jsx)(i.A.Panel,{children:(0,l.jsx)(x,{onCancel:()=>f("passwordChange"),onChangePassword:r})})]}),(0,l.jsxs)(i.A,{className:"rounded-t-none",isExpanded:b.deleteAccount,onExpand:()=>w("deleteAccount"),onCollapse:()=>f("deleteAccount"),children:[(0,l.jsx)(i.A.Button,{className:"text-14 font-medium leading-[14px]",children:p("dashboard.delete.your.account")}),(0,l.jsx)(i.A.Panel,{children:(0,l.jsx)(g,{onCancel:()=>f("deleteAccount"),onDeleteAccount:u})})]})]})]})]})};var j=s(60798),y=s(38917),N=s(47240),A=s(55195);let C=(e,a)=>{let s={};for(let l in e)a[l]!==e[l]&&(s[l]=e[l]);return s};var k=s(17180);let P=()=>{let{data:e}=(0,k.A)();return{roleOptions:e.map(e=>{let{name:a,key:s}=e;return{name:null!=a?a:"",value:null!=s?s:""}})}};var q=s(76046),S=s(90942),L=s(70533);let R=e=>{var a,s,r;let{onUpdateAccount:o,account:d}=e,{translate:i}=(0,t.A)(),c=(0,q.useRouter)(),[m,u]=(0,n.useState)(d),p=(0,n.useCallback)(e=>{u({...m,[e.target.name]:e.target.value})},[m]),x=(0,n.useCallback)(async()=>{await (null==o?void 0:o(m)),c.back()},[o,m,c]),h={pattern:"[A-Za-z\\s\\.]+",title:i("common.name.validation")};return(0,l.jsx)(S.A,{translations:{cancel:i("common.cancel"),submit:i("common.save")},onSubmit:x,onCancel:c.back,children:(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,l.jsx)(L.A,{name:"email",label:i("common.email"),required:!0,type:"email",value:null!==(a=m.email)&&void 0!==a?a:"",onChange:p,containerClassName:"w-full min-w-[unset] md:w-[350px] lg:w-[400px]"}),(0,l.jsx)(L.A,{name:"firstName",label:i("common.firstName"),required:!0,value:null!==(s=m.firstName)&&void 0!==s?s:"",...h,onChange:p,containerClassName:"w-full min-w-[unset] md:w-[350px] lg:w-[400px]"}),(0,l.jsx)(L.A,{name:"lastName",label:i("common.lastName"),required:!0,value:null!==(r=m.lastName)&&void 0!==r?r:"",...h,onChange:p,containerClassName:"w-full min-w-[unset] md:w-[350px] lg:w-[400px]"})]})})},E=e=>{let a=(0,q.useSearchParams)().get("subPath"),s=(0,n.useMemo)(()=>{let s={"edit-personal-info":{title:"dashboard.personal.info.edit",Component:(0,l.jsx)(R,{...e})}};if(a&&Object.keys(s).includes(a))return s[a]},[a,e]);return{subPath:a,ActiveSubPath:s}},M=()=>{var e,a,s,n,t,o,d;let{account:i,updateAccount:c,changePassword:m,deleteAccount:u,logout:p}=(0,j.A)(),x=(0,h.A)(),{businessUnits:v}=(0,N.A)(),{selectedBusinessUnit:b}=(0,w.rW)(),{roles:g,isAdmin:k}=(0,y.A)(null==b?void 0:b.key),{roleOptions:q}=P(),S={account:{firstName:null!==(a=null==i?void 0:i.firstName)&&void 0!==a?a:"",lastName:null!==(s=null==i?void 0:i.lastName)&&void 0!==s?s:"",email:null!==(n=null==i?void 0:i.email)&&void 0!==n?n:"",businessUnit:null!==(t=null==v?void 0:null===(e=v[0])||void 0===e?void 0:e.key)&&void 0!==t?t:"",roles:g.filter(e=>!!e.key).map(e=>e.key)},businessUnitOptions:v.map(e=>{var a;let{name:s,key:l}=e;return{name:null!==(a=null!=s?s:l)&&void 0!==a?a:"",value:null!=l?l:""}}),roleOptions:q,isAdmin:k,onUpdateAccount:async e=>{i&&await c(C(e,i))},onChangePassword:async(e,a)=>{await m(e,a)},onDeleteAccount:async e=>{let a=await u(e);return a.success&&(await p(),x.refresh()),a.success}},{ActiveSubPath:L}=E(S);return(0,l.jsx)(r.A,{title:null!==(o=null==L?void 0:L.title)&&void 0!==o?o:"account.settings.security",href:A.s.settings,userName:null==i?void 0:i.firstName,children:null!==(d=null==L?void 0:L.Component)&&void 0!==d?d:(0,l.jsx)(f,{...S})})}},3762:(e,a,s)=>{s.d(a,{A:()=>n});var l=s(12115);let n=l.forwardRef(function(e,a){let{title:s,titleId:n,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},r),s?l.createElement("title",{id:n},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))})}}]);
//# sourceMappingURL=8690.484bdaad795570c1.js.map