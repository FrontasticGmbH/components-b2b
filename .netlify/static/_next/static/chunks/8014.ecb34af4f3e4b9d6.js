"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8014],{8014:(n,e,t)=>{t.r(e),t.d(e,{default:()=>w});var i=t(95155),o=t(12115),s=t(66775),l=t(52489),u=t(54843),d=t(56518),a=t(4239),r=t(47240),c=t(47531),p=t(14746),m=t(58617),v=t(60410),h=t(37892),A=t(60798),y=t(13947),g=t(66493),k=t(36957);let b=()=>{let{translate:n}=(0,v.A)(),{selectedBusinessUnit:e,selectedStore:t}=(0,h.rW)(),{requestQuote:i}=(0,a.A)(null==e?void 0:e.key,null==t?void 0:t.key);return[{id:"purchase.order",name:"".concat(n("checkout.purchase.order")," (PO)"),description:n("checkout.purchase.order.desc"),image:{src:"",className:""},makePayment:async n=>(await i(n)).quoteRequestId}]},w=n=>{var e,t,w,C,I,q,f,S,M,P,R,D;let{data:_}=n,x=(0,s.A)(),{projectSettings:E}=(0,g.A)(),{account:N}=(0,A.A)(),{translate:U}=(0,v.A)(),{addAddress:L}=(0,r.A)(),{selectedBusinessUnit:O,selectedStore:W}=(0,h.rW)(),{cart:j,updateCart:K,setShippingMethod:T,redeemDiscount:z,removeDiscount:B}=(0,a.A)(null==O?void 0:O.key,null==W?void 0:W.key),F=b(),[G,H]=(0,o.useState)(),[J,Q]=(0,o.useState)({});return(0,i.jsx)(l.A,{initialData:{shippingAddress:(null==j?void 0:j.shippingAddress)&&!(0,y.R)(j.shippingAddress)?(0,d.v)(null==j?void 0:j.shippingAddress):void 0,billingAddress:(null==j?void 0:j.billingAddress)&&!(0,y.R)(j.billingAddress)?(0,d.v)(null==j?void 0:j.billingAddress):void 0,shippingMethodId:null==j?void 0:null===(e=j.shippingInfo)||void 0===e?void 0:e.shippingMethodId},translations:{header:U("checkout.quote.checkout"),orderSummaryTitle:U("checkout.quote.summary"),orderSummarySubtitle:U("checkout.quote.items"),purchase:U("checkout.submit.quote.request")},buyerCanAddComment:!0,paymentMethods:F,discounts:(null!==(t=null==j?void 0:j.discountCodes)&&void 0!==t?t:[]).map(n=>{let{discountId:e,name:t,code:i}=n;return{name:null!=t?t:"",code:null!=i?i:"",onRemove:async()=>!!(await B(null!=e?e:"")).cartId}}),transaction:{subtotal:null!==(w=null==j?void 0:j.transaction.subtotal.centAmount)&&void 0!==w?w:0,discounts:null!==(C=null==j?void 0:j.transaction.discount.centAmount)&&void 0!==C?C:0,shipping:{isEstimated:!(null==j?void 0:j.shippingInfo),amount:null!==(I=null==j?void 0:j.transaction.shipping.centAmount)&&void 0!==I?I:0},taxes:null!==(q=null==j?void 0:j.transaction.tax.centAmount)&&void 0!==q?q:0,total:null!==(f=null==j?void 0:j.transaction.total.centAmount)&&void 0!==f?f:0,currency:null!==(S=null==j?void 0:j.transaction.total.currencyCode)&&void 0!==S?S:"USD"},products:(null!==(M=null==j?void 0:j.lineItems)&&void 0!==M?M:[]).map(c.k),addresses:null!==(P=null==O?void 0:O.addresses)&&void 0!==P?P:[],shippingMethods:(null!==(R=null==j?void 0:j.availableShippingMethods)&&void 0!==R?R:[]).map(p.k),countryOptions:(null!==(D=null==E?void 0:E.countries)&&void 0!==D?D:[]).map(k.D).map(n=>{let{name:e,code:t,states:i}=n;return{name:e,value:t,states:i.map(n=>{let{name:e,code:t}=n;return{name:e,value:t}})}}),termsAndConditionsLink:(0,u.s)(_.termsAndConditionsLink),onAddAddress:async n=>null!=O&&!!O.key&&!!(await L({...(0,d.l)(n),businessUnitKey:null==O?void 0:O.key})).businessUnitId,onApplyDiscount:async n=>!!(await z(n)).cartId,onCompleteAddresses:async(n,e)=>{if(!N)return!1;let t=await K({email:N.email,shipping:(0,d.l)(n),billing:(0,d.l)(e)});if(!t.success){var i;m.A.error((null===(i=t.error)||void 0===i?void 0:i.message)||U("common.something.went.wrong"),{position:"top-right"})}return t.success},onCompleteShipping:async n=>!!(await T(n)).cartId,onCompletePayment:async(n,e)=>{let t=F.find(e=>e.id===n);return!!t&&(H(t),Q(e),!0)},onSubmitPurchase:async n=>{let{buyerComment:e}=n;if(!G)return!1;let t=await G.makePayment({...J,buyerComment:e});return t?x.push("/quote-thank-you?quoteRequestId=".concat(t)):m.A.error(U("common.something.went.wrong"),{position:"top-right"}),!!t}})}}}]);
//# sourceMappingURL=8014.ecb34af4f3e4b9d6.js.map