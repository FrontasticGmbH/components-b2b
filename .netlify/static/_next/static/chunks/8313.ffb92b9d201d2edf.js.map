{"version":3,"file":"static/chunks/8313.ffb92b9d201d2edf.js","mappings":"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","sources":["webpack://_N_E/./node_modules/@commercetools/checkout-browser-sdk/dist/checkout.js","webpack://_N_E/./node_modules/@commercetools/checkout-browser-sdk/dist/index.js","webpack://_N_E/./node_modules/@commercetools/checkout-browser-sdk/dist/init.js","webpack://_N_E/./node_modules/@commercetools/checkout-browser-sdk/dist/services/config.js","webpack://_N_E/./node_modules/@commercetools/checkout-browser-sdk/dist/subscriptions.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.close = exports.paymentFlow = exports.checkoutFlow = exports.checkout = exports.createModal = exports.addMessageEventListener = exports.CheckoutMode = void 0;\nconst init_1 = require(\"./init\");\nconst config_1 = require(\"./services/config\");\nvar CheckoutMode;\n(function (CheckoutMode) {\n    CheckoutMode[\"completeFlow\"] = \"complete-flow\";\n    CheckoutMode[\"paymentOnly\"] = \"payment-only\";\n})(CheckoutMode || (exports.CheckoutMode = CheckoutMode = {}));\nconst MODAL_ID = 'commercetools-checkout';\nconst CONTAINER_EMBEDDED = 'data-ctc';\nlet listener;\nconst originalOverflow = document.body.style.overflow;\nconst getEmbeddedContainer = () => {\n    const embeddedAll = document.querySelectorAll(`[${CONTAINER_EMBEDDED}]`);\n    if (embeddedAll.length > 0 &&\n        (embeddedAll[0] instanceof HTMLDivElement || embeddedAll[0] instanceof HTMLSpanElement))\n        return embeddedAll[0];\n    return null;\n};\nvar PostMessageCodes;\n(function (PostMessageCodes) {\n    PostMessageCodes[\"InitCheckout\"] = \"init_checkout\";\n})(PostMessageCodes || (PostMessageCodes = {}));\nconst closeModal = () => {\n    const hasUnmount = window.commercetoolsCheckout &&\n        window.commercetoolsCheckout.root &&\n        window.commercetoolsCheckout.root.unmount;\n    if (hasUnmount) {\n        window.commercetoolsCheckout.root.unmount();\n    }\n    else {\n        // left here for backward compatibility, remove in the future\n        const embeddedContainer = getEmbeddedContainer();\n        if (embeddedContainer) {\n            embeddedContainer.innerHTML = '';\n        }\n    }\n    const modal = document.getElementById(MODAL_ID);\n    if (modal) {\n        document.body.style.overflow = originalOverflow;\n        modal.remove();\n    }\n    if (listener) {\n        window.removeEventListener('message', listener);\n    }\n};\nconst addMessageEventListener = (checkoutMode) => {\n    listener = ({ origin, data }) => {\n        var _a;\n        if (origin !== window.location.origin)\n            return;\n        if ((data === null || data === void 0 ? void 0 : data.code) === 'checkout_cancelled') {\n            closeModal();\n        }\n        if ((data === null || data === void 0 ? void 0 : data.code) === 'checkout_loaded') {\n            const checkoutConfig = Object.assign({}, (0, config_1.getCheckoutConfig)());\n            window.postMessage({\n                code: PostMessageCodes.InitCheckout,\n                payload: Object.assign(Object.assign({}, checkoutConfig), { checkoutMode }),\n            }, window.location.origin);\n        }\n        if ((data === null || data === void 0 ? void 0 : data.code) === 'checkout_completed') {\n            closeModal();\n            const { id } = ((_a = data === null || data === void 0 ? void 0 : data.payload) === null || _a === void 0 ? void 0 : _a.order) || {};\n            const { callbackUrl, returnUrl } = (0, config_1.getCheckoutConfig)();\n            if (returnUrl) {\n                window.location.href = `${returnUrl}?orderId=${id}`;\n            }\n            else if (callbackUrl) {\n                window.location.href = `${callbackUrl}?orderId=${id}`;\n            }\n        }\n    };\n    window.addEventListener('message', listener);\n};\nexports.addMessageEventListener = addMessageEventListener;\nconst createModal = async (checkoutType = CheckoutMode.completeFlow) => {\n    closeModal();\n    (0, exports.addMessageEventListener)(checkoutType);\n    if (!getEmbeddedContainer()) {\n        const div = document.createElement('div');\n        div.setAttribute('id', MODAL_ID);\n        document.body.appendChild(div);\n        document.body.style.overflow = 'hidden';\n    }\n    if (typeof window.commercetoolsCheckout === 'object' &&\n        typeof window.commercetoolsCheckout.render === 'function') {\n        window.commercetoolsCheckout.render();\n    }\n    else {\n        const script = document.createElement('script');\n        script.src = `${(0, config_1.getAppHost)()}/main.js`;\n        script.onerror = () => console.log(`[ctc] Error loading checkout script on ${script.src}`);\n        document.head.appendChild(script);\n    }\n};\nexports.createModal = createModal;\nconst checkout = (checkoutData) => {\n    (0, config_1.updateCheckoutConfig)(checkoutData);\n    (0, exports.createModal)();\n};\nexports.checkout = checkout;\nconst checkoutFlow = (config) => {\n    if (typeof config !== 'object')\n        throw new Error('Bad config, please review docs');\n    (0, config_1.updateCheckoutConfig)(config, true);\n    (0, init_1.handleCustomSubscriptions)(config, true);\n    (0, init_1.handleDefaultSubscriptions)(config, true);\n    (0, exports.createModal)();\n};\nexports.checkoutFlow = checkoutFlow;\nconst paymentFlow = (config) => {\n    if (typeof config !== 'object')\n        throw new Error('Bad config, please review docs');\n    (0, config_1.updateCheckoutConfig)(config, true);\n    (0, init_1.handleCustomSubscriptions)(config, true);\n    (0, init_1.handleDefaultSubscriptions)(config, true);\n    (0, exports.createModal)(CheckoutMode.paymentOnly);\n};\nexports.paymentFlow = paymentFlow;\nconst close = () => {\n    closeModal();\n};\nexports.close = close;\n//# sourceMappingURL=checkout.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./checkout\"), exports);\n__exportStar(require(\"./init\"), exports);\n__exportStar(require(\"./subscriptions\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.init = exports.handleDefaultSubscriptions = exports.handleCustomSubscriptions = void 0;\nconst config_1 = require(\"./services/config\");\nconst subscriptions_1 = require(\"./subscriptions\");\nconst subscriptions = {};\nconst handleCustomSubscriptions = (config, forceUnsubscribe) => {\n    [\n        ['info', 'onInfo'],\n        ['warn', 'onWarn'],\n        ['error', 'onError'],\n    ].forEach((i) => {\n        const level = i[0];\n        const fnName = i[1];\n        if (forceUnsubscribe && subscriptions[fnName])\n            (0, subscriptions_1.unsubscribe)(subscriptions[fnName]);\n        if (typeof config[fnName] === 'function') {\n            if (subscriptions[fnName])\n                (0, subscriptions_1.unsubscribe)(subscriptions[fnName]);\n            subscriptions[fnName] = (0, subscriptions_1.subscribe)(`${level}:*`, config[fnName]);\n        }\n    });\n};\nexports.handleCustomSubscriptions = handleCustomSubscriptions;\nconst handleDefaultSubscriptions = (config, forceUnsubscribe) => {\n    [\n        ['info', 'logInfo'],\n        ['warn', 'logWarn'],\n        ['error', 'logError'],\n    ].forEach((i) => {\n        const level = i[0];\n        const fnName = i[1];\n        if (forceUnsubscribe && subscriptions[fnName])\n            (0, subscriptions_1.unsubscribe)(subscriptions[fnName]);\n        if (config[fnName] === true) {\n            if (subscriptions[fnName])\n                (0, subscriptions_1.unsubscribe)(subscriptions[fnName]);\n            subscriptions[fnName] = (0, subscriptions_1.subscribe)(`${level}:*`, function (m) {\n                m.payload !== undefined\n                    ? console[level]('[ctc]', m.code, m.payload)\n                    : console[level]('[ctc]', m.code);\n            });\n        }\n    });\n};\nexports.handleDefaultSubscriptions = handleDefaultSubscriptions;\nconst init = (config) => {\n    if (typeof config !== 'object')\n        throw new Error('Bad config, please review docs');\n    if (typeof config.checkoutConfig === 'object')\n        (0, config_1.updateCheckoutConfig)(config.checkoutConfig);\n    (0, exports.handleCustomSubscriptions)(config);\n    (0, exports.handleDefaultSubscriptions)(config);\n};\nexports.init = init;\n//# sourceMappingURL=init.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.updateCheckoutConfig = exports.getCheckoutConfig = exports.getAppHost = exports.MissingConfigurationField = void 0;\nconst fieldComponentTypes = [\n    'text',\n    'checkbox',\n    'radio',\n    'select',\n    'email',\n    'number',\n    'tel',\n    'date',\n    'time',\n    'datetime',\n    'url',\n];\nlet checkoutConfig = {};\nclass MissingConfigurationField extends Error {\n    constructor(fieldName) {\n        super(`Missing field in the configuration: ${fieldName}`);\n        Object.setPrototypeOf(this, MissingConfigurationField.prototype);\n    }\n}\nexports.MissingConfigurationField = MissingConfigurationField;\nconst getAppHost = () => {\n    if (!checkoutConfig.region && !checkoutConfig.host) {\n        throw new MissingConfigurationField('region');\n    }\n    if (checkoutConfig.region && checkoutConfig.region.startsWith('http')) {\n        return checkoutConfig.region;\n    }\n    return checkoutConfig.region\n        ? `https://app.checkout.${checkoutConfig.region}.commercetools.com`\n        : checkoutConfig.host;\n};\nexports.getAppHost = getAppHost;\nconst getCheckoutConfig = () => checkoutConfig;\nexports.getCheckoutConfig = getCheckoutConfig;\nconst updateCheckoutConfig = (newConfig, reset = false) => {\n    if (reset)\n        checkoutConfig = {};\n    checkoutConfig = {\n        skipConfirmationPages: 'skipConfirmationPages' in newConfig\n            ? newConfig.skipConfirmationPages\n            : checkoutConfig.skipConfirmationPages,\n        // deprecated\n        accessToken: 'accessToken' in newConfig ? newConfig.accessToken : checkoutConfig.accessToken,\n        applicationId: 'applicationId' in newConfig ? newConfig.applicationId : checkoutConfig.applicationId,\n        applicationKey: 'applicationKey' in newConfig ? newConfig.applicationKey : checkoutConfig.applicationKey,\n        callbackUrl: 'callbackUrl' in newConfig ? newConfig.callbackUrl : checkoutConfig.callbackUrl,\n        returnUrl: 'returnUrl' in newConfig ? newConfig.returnUrl : checkoutConfig.returnUrl,\n        sellerId: 'sellerId' in newConfig ? newConfig.sellerId : checkoutConfig.sellerId,\n        cartId: 'cartId' in newConfig ? newConfig.cartId : checkoutConfig.cartId,\n        host: 'host' in newConfig ? newConfig.host : checkoutConfig.host,\n        // documented\n        paymentReference: 'paymentReference' in newConfig\n            ? newConfig.paymentReference\n            : checkoutConfig.paymentReference,\n        locale: 'locale' in newConfig ? newConfig.locale : checkoutConfig.locale,\n        projectKey: 'projectKey' in newConfig ? newConfig.projectKey : checkoutConfig.projectKey,\n        storeKey: 'storeKey' in newConfig ? newConfig.storeKey : checkoutConfig.storeKey,\n        styles: 'styles' in newConfig ? newConfig.styles : checkoutConfig.styles,\n        languageOverrides: 'languageOverrides' in newConfig\n            ? newConfig.languageOverrides\n            : checkoutConfig.languageOverrides,\n        forms: 'forms' in newConfig ? newConfig.forms : checkoutConfig.forms,\n        currencyLocale: 'currencyLocale' in newConfig ? newConfig.currencyLocale : checkoutConfig.currencyLocale,\n        showTaxes: 'showTaxes' in newConfig ? newConfig.showTaxes : checkoutConfig.showTaxes,\n        sessionId: 'sessionId' in newConfig ? newConfig.sessionId : checkoutConfig.sessionId,\n        region: 'region' in newConfig ? newConfig.region : checkoutConfig.region,\n        browserSdkVersion: process.env.__VERSION__,\n    };\n    return checkoutConfig;\n};\nexports.updateCheckoutConfig = updateCheckoutConfig;\n//# sourceMappingURL=config.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.unsubscribe = exports.subscribe = exports.filterMessages = exports.matches = exports.typeMatches = exports.Severity = void 0;\nvar Severity;\n(function (Severity) {\n    Severity[\"INFO\"] = \"info\";\n    Severity[\"WARN\"] = \"warn\";\n    Severity[\"ERROR\"] = \"error\";\n})(Severity || (exports.Severity = Severity = {}));\nconst typeMatches = (pattern) => (messageType) => {\n    if (!pattern || !messageType)\n        return false;\n    if (pattern === '*' || messageType === pattern)\n        return true;\n    const patternParts = pattern.split(':');\n    const typeParts = messageType.split(':');\n    if (!typeParts[0] || patternParts[0] !== typeParts[0])\n        return false;\n    return (0, exports.typeMatches)(patternParts.slice(1).join(':'))(typeParts.slice(1).join(':'));\n};\nexports.typeMatches = typeMatches;\nconst matches = (pattern) => (message) => (0, exports.typeMatches)(pattern)(message.type);\nexports.matches = matches;\nconst filterMessages = (messages, pattern) => messages.filter((0, exports.matches)(pattern));\nexports.filterMessages = filterMessages;\nconst listeners = {};\nconst subscribe = (pattern, handler) => {\n    const listenerId = `${pattern}_${Math.round(Math.random() * 1000000000000000)}`;\n    const listener = ({ origin, data }) => {\n        if (origin !== window.location.origin)\n            return;\n        if (data.source !== 'commercetoolsCheckout')\n            return;\n        const message = data || {};\n        if ((0, exports.typeMatches)(pattern)(message.type)) {\n            handler(message);\n        }\n    };\n    window.addEventListener('message', listener);\n    listeners[listenerId] = listener;\n    return listenerId;\n};\nexports.subscribe = subscribe;\nconst unsubscribe = (listenerId) => window.removeEventListener('message', listeners[listenerId]);\nexports.unsubscribe = unsubscribe;\n//# sourceMappingURL=subscriptions.js.map"],"names":[],"sourceRoot":"","ignoreList":[0,1,2,3,4]}